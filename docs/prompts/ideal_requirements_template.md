# [プロジェクト名] 要件定義書

**バージョン**: 1.0.0  
**最終更新日**: 2025-05-07  
**ステータス**: 進行中  

## 1. プロジェクト概要

### 1.1 目的と背景

[このプロジェクトが解決する核心的な課題と提供する本質的な価値の簡潔な説明]

### 1.2 ターゲットユーザー

- [主要ユーザー層1]: [特性と目的]
- [主要ユーザー層2]: [特性と目的]
- [主要ユーザー層3]: [特性と目的]

### 1.3 核となる機能と価値

以下は、プロジェクトの本質的価値を提供するために「絶対に必要」な機能です。各機能は「この機能がないとプロジェクトの目的達成が不可能になる」という基準で厳選されています。

- [主要機能1]: [解決する具体的な課題と提供する価値] - *この機能がないと[どのような問題が起きるか]*
- [主要機能2]: [解決する具体的な課題と提供する価値] - *この機能がないと[どのような問題が起きるか]*
- [主要機能3]: [解決する具体的な課題と提供する価値] - *この機能がないと[どのような問題が起きるか]*

## 2. 画面一覧

このアプリケーションは以下の画面で構成されます。各画面のモックアップは作成後に詳細化されます。

### 2.1 ページ一覧

| ID | 画面名 | 目的 | 実現する核心的価値 | 優先度 | モックアップ | 実装状況 |
|----|------|------|----------------|------|------------|---------|
| P-001 | ログイン画面 | ユーザー認証 | セキュリティ確保 | 高 | [login.html](/mockups/login.html) | 完了 (100%) |
| P-002 | ダッシュボード | 主要指標閲覧 | データ可視化・意思決定支援 | 高 | [dashboard.html](/mockups/dashboard.html) | 進行中 (60%) |

### 2.2 画面フロー

```
[ログイン画面] → [ダッシュボード] → [ユーザー管理/設定画面/レポート画面]
```

## 3. 画面詳細

> **注意**: 以下の各画面の「データとAPI」セクションは、`shared/index.ts`に定義されている型とAPIパスから抽出した主要情報です。完全な型定義とAPI仕様の詳細については、[型定義ファイル](/shared/index.ts)および各API仕様書へのリンクを参照してください。

### 3.1 ログイン画面 (P-001)

**画面概要**: ユーザーがシステムにアクセスするための認証画面

**含まれる要素**:
- メールアドレス入力フィールド
- パスワード入力フィールド
- ログインボタン
- パスワードリセットリンク

**モックアップ**: [login.html](/mockups/login.html)

**状態と動作**:
- エラー状態: 認証失敗時はフォーム下部にエラーメッセージ表示
- 送信中状態: ログインボタンがローディング表示に変わる

**データとAPI**:
- User: { email: string, password: string, role: string }
- `POST /api/v1/auth/login` → 認証処理
  - リクエスト: { email, password }
  - 成功: { token, user }
  - エラー: 401「メールアドレスまたはパスワードが正しくありません」

[API仕様の詳細はこちら](/docs/api/auth.md)

### 3.2 ダッシュボード (P-002)

**画面概要**: ユーザーがシステムの主要指標を一覧で確認できる中央画面

**含まれる要素**:
- サマリーカード (4枚)
- 週次トレンドグラフ
- 最近のアクティビティリスト
- クイックアクションボタン

**モックアップ**: [dashboard.html](/mockups/dashboard.html)

**状態と動作**:
- 初期ロード: ローディングスケルトン表示
- データフィルタリング: フィルタ適用時は部分リロード
- ドラッグ&ドロップ: カードの位置を変更可能

**データとAPI**:
- DashboardMetrics: { summary: MetricSummary[], trends: TrendPoint[] }
- Activity: { id: string, type: string, timestamp: Date, description: string }
- `GET /api/v1/dashboard/metrics` → ダッシュボード指標取得
- `GET /api/v1/dashboard/activities` → 最近のアクティビティ取得
- `PUT /api/v1/dashboard/layout` → ダッシュボードレイアウト更新

[API仕様の詳細はこちら](/docs/api/dashboard.md)

[他の画面も同様の形式で記述...]

## 4. 共通コンポーネント

| ID | コンポーネント名 | 用途 | 使用画面 | モックアップ参照 |
|----|--------------|------|----------|---------------|
| C-001 | ヘッダーナビゲーション | アプリ内移動 | 全画面 | dashboard.html#header |
| C-002 | サイドメニュー | 機能選択 | ログイン以外全画面 | dashboard.html#sidemenu |
| C-003 | データテーブル | 一覧表示 | ユーザー管理、レポート | user-management.html#table |
| C-004 | アクションボタングループ | 操作集約 | 全画面 | common-components.html#buttons |

## 5. データモデル概要

アプリケーションの主要データモデルは以下の通りです。

| エンティティ | 主な属性 | 関連エンティティ |
|------------|----------|----------------|
| User | id, email, name, role | Organization, Activity |
| Organization | id, name, settings | User, Report |
| Dashboard | id, user_id, widgets | User, Metric |
| Activity | id, user_id, type, data | User |

詳細な型定義は [型定義ファイル](/shared/index.ts) を参照してください。

## 6. 特記すべき非機能要件

<!-- 
注: このセクションは標準的な実装方針から逸脱する特別な要件がある場合のみ記載してください。
HTTPS対応、レスポンシブデザイン、基本的なセキュリティ対策などの一般的な非機能要件は
現代の開発では標準的に適用されるため、特に記載が必要ない限り省略可能です。
-->

以下は標準的な実装方針から特に注意すべき点です：

- **高負荷対応**: ダッシュボード画面では同時に1000ユーザー以上のアクセスに対応する必要があります
- **地域制限**: EU圏のユーザーに対しては特定の機能制限が必要です
- **オフライン対応**: 重要機能は一部オフライン環境でも動作する必要があります

## 7. 開発計画とマイルストーン

| フェーズ | 内容 | ステータス |
|---------|------|----------|
| フェーズ1 | 要件定義とモックアップ作成 | 完了 |
| フェーズ2 | 認証・ダッシュボード実装 | 進行中 |
| フェーズ3 | ユーザー管理・設定実装 | 未着手 |
| フェーズ4 | レポート機能実装 | 未着手 |
| フェーズ5 | テストと品質保証 | 未着手 |

## 8. 現在のフォーカス

現在の開発フォーカスはダッシュボード画面(P-002)の実装です。

注: 詳細な実装状況と進捗報告は [SCOPE_PROGRESS.md](/docs/SCOPE_PROGRESS.md) を参照してください。

## 9. 添付資料

### 9.1 ビジネス資料
- [ユーザーペルソナ](/docs/personas.md)
- [競合分析](/docs/competitive-analysis.md)
- [用語集](/docs/glossary.md)

### 9.2 技術資料
- [技術スタック定義](/docs/architecture/tech-stack.md)
- [デプロイガイド](/docs/deployment/deploy.md)
- [環境変数設定](/docs/deployment/env-variables.md)