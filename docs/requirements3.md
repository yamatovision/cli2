# AI日経225トレードシグナル 要件定義書

**バージョン**: 1.0.0  
**最終更新日**: 2025-01-03  
**ステータス**: ドラフト  

## 1. プロジェクト概要

### 1.1 目的と背景

このプロジェクトは、日経225投資の初心者が安全に、そして楽しみながら資産を増やしていくことを支援するAIトレードツールです。投資助言代理業のクライアント様が、顧客に提供するサービスとして開発します。「今は買っちゃダメ♡」といった親しみやすい表現でAIがアドバイスし、利用者の90%以上が3ヶ月以上継続して使い続け、資産を微増させることを目指します。

### 1.2 ターゲットユーザー

- **初心者投資家**: 日経225投資を始めたばかりで、売買タイミングの判断に自信がない方
- **リスク回避志向の投資家**: 大きな損失を避けながら、着実に資産を増やしたい方
- **忙しいビジネスパーソン**: 1時間足でのトレードで、効率的に投資したい方

### 1.3 核となる機能と価値

以下は、プロジェクトの本質的価値を提供するために「絶対に必要」な機能です。各機能は「この機能がないとプロジェクトの目的達成が不可能になる」という基準で厳選されています。

- **AIトレードシグナル**: ClaudeのAIが1時間足チャートを分析し、買い/売り/待機のシンプルな判断を提供 - *この機能がないとAIツールとしての価値が提供できない*
- **資金管理アドバイス**: 適切なポジションサイズとレバレッジ管理で退場リスクを最小化 - *この機能がないと利用者が大損して退場してしまう*
- **親しみやすいメッセージ**: 「今は買っちゃダメ♡」など、セクシーで楽しい表現でトレードの満足感を演出 - *この機能がないと継続利用率90%の目標が達成できない*

## 2. 画面一覧

このアプリケーションは以下の画面要素と実際のページで構成されます。各ページのモックアップは作成後に詳細化されます。

### 2.1 画面要素一覧

以下は機能的に必要な全ての画面要素です。これらは必ずしも独立したページとして実装されるわけではありません。

| 画面要素名 | 目的 | 実現する核心的価値 |
|----------|------|----------------|
| ログイン要素 | ユーザー認証 | セキュリティ確保・個人設定の保護 |
| AIシグナル表示要素 | 売買判断の表示 | AIによる投資判断支援 |
| チャート表示要素 | 1時間足チャート表示 | 視覚的な相場確認 |
| 資金管理要素 | ポジションサイズ計算 | リスク管理・退場防止 |
| 取引履歴要素 | 過去の取引確認 | 成績確認・学習機会 |
| ユーザー設定要素 | 個人設定管理 | カスタマイズ・使いやすさ向上 |

### 2.2 ページ構成計画

上記の画面要素を、ユーザー体験とナビゲーション効率を最適化するために以下のように統合・構成します。

#### 2.2.1 公開ページ

| ID | ページ名 | 主な目的 | 含まれる画面要素 | 優先度 | モックアップ | 実装状況 |
|----|---------|---------|----------------|-------|------------|---------|
| P-001 | ログインページ | ユーザー認証 | ログイン要素 | 高 | [login.html](/mockups/login.html) | 未着手 |

#### 2.2.2 ユーザーページ（要認証）

| ID | ページ名 | 主な目的 | 含まれる画面要素 | 優先度 | モックアップ | 実装状況 |
|----|---------|---------|----------------|-------|------------|---------|
| U-001 | トレードダッシュボード | AIシグナル確認・取引判断 | AIシグナル表示要素、チャート表示要素、資金管理要素 | 高 | [dashboard.html](/mockups/dashboard.html) | 未着手 |
| U-002 | 取引履歴 | 過去の成績確認 | 取引履歴要素 | 中 | [history.html](/mockups/history.html) | 未着手 |
| U-003 | 設定ページ | 個人設定管理 | ユーザー設定要素 | 中 | [settings.html](/mockups/settings.html) | 未着手 |

### 2.3 主要ルート定義

##### 公開ルート
| パス | ページID | 説明 |
|------|---------|------|
| `/login` | P-001 | ログイン |

##### ユーザールート（要認証）
| パス | ページID | 説明 |
|------|---------|------|
| `/` | U-001 | トレードダッシュボード |
| `/history` | U-002 | 取引履歴 |
| `/settings` | U-003 | 設定 |

### 2.4 特殊な画面遷移

- ログイン成功後は自動的にトレードダッシュボードへ遷移
- セッションタイムアウト時はログインページへリダイレクト

### 2.5 共通レイアウト構成

#### レイアウトパターン
- **公開ページ用**: ヘッダーのみ（シンプル）
- **認証後ページ用**: ヘッダー + ナビゲーションバー（コンパクト）

#### ヘッダー要素

##### 公開ページヘッダー
- アプリケーションロゴ「AI日経225」
- 「始める」ボタン

##### 認証後ヘッダー
- アプリケーションロゴ「AI日経225」
- 現在の日経225価格
- ユーザー名
- ログアウトボタン

#### ナビゲーションバー
- ダッシュボード（ホームアイコン）
- 取引履歴（チャートアイコン）
- 設定（歯車アイコン）

## 3. ページ詳細

### 3.1 公開ページ

#### 3.1.1 ログインページ (P-001)

**ページ概要**: ユーザー認証を行い、サービスへのアクセスを制御します。

**含まれる画面要素**:
- メールアドレス入力フィールド
- パスワード入力フィールド
- 「ログイン」ボタン
- 「パスワードを忘れた方」リンク

**状態と動作**:
- 初期状態: 入力フィールドは空
- 認証失敗: エラーメッセージ表示
- 認証成功: ダッシュボードへ遷移

**データとAPI**:
- `POST /api/auth/login` → ユーザー認証
  - リクエスト: { email: string, password: string }
  - 成功: { token: string, user: { id: string, email: string } }
  - エラー: [401] 認証失敗

### 3.2 ユーザーページ

#### 3.2.1 トレードダッシュボード (U-001)

**ページ概要**: AIが分析した売買シグナルを表示し、資金管理アドバイスと共に投資判断をサポートします。

**含まれる画面要素**:
- AIシグナル表示エリア（大きく目立つデザイン）
  - 「買いチャンス！💕」「売り時よ♡」「今は待って...💋」などのメッセージ
  - 信頼度インジケーター（★★★★☆）
- 1時間足チャート（シンプルなローソク足）
- 資金管理アドバイス
  - 推奨ポジションサイズ
  - 現在の証拠金状況
  - リスク警告（必要時のみ）

**状態と動作**:
- 初期読込: 最新のAI分析を取得
- 1時間ごと: 自動更新（新しいシグナル確認）
- シグナル変更時: プッシュ通知（設定による）

**データとAPI**:
- `GET /api/signals/latest` → 最新のAIシグナル取得
  - 成功: { signal: 'BUY'|'SELL'|'WAIT', message: string, confidence: number, timestamp: string }
- `GET /api/market/chart` → チャートデータ取得
  - 成功: { candles: Array<{time: string, open: number, high: number, low: number, close: number}> }
- `GET /api/user/position` → 現在のポジション情報
  - 成功: { balance: number, position: number, margin: number }

#### 3.2.2 取引履歴 (U-002)

**ページ概要**: 過去の取引結果を確認し、AIシグナルの成績を振り返ることができます。

**含まれる画面要素**:
- 月別成績サマリー
- 取引履歴リスト
  - 日時、シグナル、結果、損益
- 累積損益グラフ

**データとAPI**:
- `GET /api/history` → 取引履歴取得
  - 成功: { trades: Array<{id: string, date: string, signal: string, result: number}>, summary: {totalPnL: number, winRate: number} }

#### 3.2.3 設定ページ (U-003)

**ページ概要**: 個人設定を管理し、リスク許容度やお知らせ設定をカスタマイズします。

**含まれる画面要素**:
- リスク設定（保守的/標準/積極的）
- 通知設定（プッシュ通知ON/OFF）
- アカウント情報

**データとAPI**:
- `GET /api/user/settings` → 設定情報取得
- `PUT /api/user/settings` → 設定情報更新

## 4. データモデル概要

### 4.1 主要エンティティ

| エンティティ | 主な属性 | 関連エンティティ | 備考 |
|------------|----------|----------------|------|
| User | id, email, password, riskLevel, notificationEnabled | Trade, Settings | ユーザー基本情報 |
| Signal | id, timestamp, type(BUY/SELL/WAIT), message, confidence | Trade | AIシグナル |
| Trade | id, userId, signalId, entryPrice, exitPrice, pnl, timestamp | User, Signal | 取引記録 |
| MarketData | timestamp, open, high, low, close | - | 1時間足データ |

## 5. 特記すべき非機能要件

- **レスポンス速度**: AIシグナル取得は3秒以内に完了すること
- **可用性**: 市場開場時間中は99.5%以上の稼働率を維持
- **セキュリティ**: 金融商品取引法に準拠した適切な情報管理
- **スケーラビリティ**: 初期100ユーザーから1000ユーザーまで対応可能な設計

## 6. 開発計画とマイルストーン

| フェーズ | 内容 | 期間 | ステータス |
|---------|------|------|----------|
| フェーズ1 | 要件定義・基本設計 | 1週間 | 進行中 |
| フェーズ2 | モックアップ作成 | 1週間 | 未着手 |
| フェーズ3 | バックエンド開発（6エンドポイント） | 2週間 | 未着手 |
| フェーズ4 | フロントエンド開発 | 2週間 | 未着手 |
| フェーズ5 | AI統合・テスト | 1週間 | 未着手 |

## 7. API仕様（6エンドポイント）

1. `POST /api/auth/login` - ユーザー認証
2. `GET /api/signals/latest` - 最新AIシグナル取得
3. `GET /api/market/chart` - チャートデータ取得
4. `GET /api/user/position` - ポジション情報取得
5. `GET /api/history` - 取引履歴取得
6. `PUT /api/user/settings` - ユーザー設定更新

## 8. 添付資料

- Claude API仕様書（AIシグナル生成用）
- 日経225データ取得API仕様