# AppGenius 要件定義書

**バージョン**: 1.0.2  
**最終更新日**: 2025-05-16  
**ステータス**: 更新中  

## 1. プロジェクト概要

### 1.1 目的と背景

AppGeniusは、ClaudeCodeを活用しながら非技術者でも自分の脳内にあるアイデアを形にすることができるアプリケーションを、自然言語だけで作成できる開発支援ソフトウェアです。日本のデジタル生産性を世界一に引き上げることを使命として進めているプロジェクトです。

### 1.2 ターゲットユーザー

主なターゲットユーザーは企業の経営者や意思決定者です。このAI時代において、経営者は自分の頭脳を代行したりシステム化することで効率化できることを理解していますが、従来は要件定義を行うのはプログラマーであったため、アイデアが適切に伝わらないという課題がありました。
AppGenius（ブルーランプ）を使うことで、AIが即座に要件定義を形にしながらモックアップを作成し、視覚的なフィードバックを提供しながらアイデアを形にしていくことができるため、これまでとは全く異なる開発体験を実現します。

### 1.3 ファイルの状況について

AppGenius/refference/HinagoProject★3 ディレクトリには、それぞれのエージェントの処理が終わった成果物のファイルが入っています。これらのファイルは参考資料として活用できます。

### 1.4 開発哲学と設計方針に関するメモ

**【重要】ClaudeCode中心の開発手法における設計哲学**

AppGeniusプロジェクトでは、非技術者がAI（ClaudeCode）を活用して開発を進める独自の開発手法を採用しています。その中核となる設計哲学は以下の通りです：

1. **ドキュメント中心のコード管理（Document-Centered Code Management）**
   - すべてのコード生成の起点は人間が理解しやすいドキュメントである
   - 設計意図を明確に表現できるドキュメント形式を優先する
   - 形式的で機械可読なドキュメント（OpenAPI仕様など）を「単一の真実源」として扱う

2. **コントラクトファーストアプローチの採用**
   - OpenAPI仕様（openapi.yaml）を単一の真実源として管理
   - API定義から型定義（shared/index.ts）やコードを自動生成
   - ドキュメント変更を先行させ、それに基づいてコードを更新する流れを徹底

3. **垂直スライス方式による実装戦略**
   - 機能単位で「フロントエンドからバックエンドまで一気通貫」で実装
   - 優先度の高い機能から順に完全な形で提供
   - 各機能スライスは独立して価値を提供できる形で実装
   - 共通基盤部分のみ先行して実装し、その後は機能単位での実装を進行

4. **中央集権的情報管理のメリット**
   - 非技術者が参照・修正しやすい単一のドキュメントを中心に据える
   - フロントエンド/バックエンドの整合性を自動的に担保
   - AIによるコード生成の一貫性と品質を確保

5. **開発ワークフロー**
   - 要件定義 → OpenAPI仕様作成 → コード自動生成 → 実装
   - API仕様変更が必要な場合は常にOpenAPI仕様から修正を始める
   - ClaudeCodeに指示する際は「openapi.yamlを更新してから、それに基づいてコードを生成・修正する」という2ステップのアプローチを採用

このアプローチが推奨される理由：
- 非技術者でも理解・管理しやすいドキュメント中心の開発が可能
- ClaudeCodeの強みである「ドキュメントからコードを生成する能力」を最大限に活用できる
- フロントエンド/バックエンド間の不整合を構造的に防止できる
- テスト自動化やコード生成の基盤として活用できる
- 将来の開発者（人間・AI問わず）が設計意図を理解しやすい

**実装時の注意点**：
新機能追加や修正を行う際は、必ず先にOpenAPI仕様を更新し、それからコード修正を行ってください。この順序を守ることで、システム全体の一貫性と品質を維持できます。

**AIとの開発プロセス相談用サンプル指示文**：

初めて会話するAIに開発プロセスの相談をする際は、以下のような指示文を使用することで、適切なコンテクストを形成させ、効率的にアドバイスを得られます：

```
【開発プロセス・設計相談】

まず以下のファイルを確認してください：
1. /docs/requirements.md - 全体の要件定義と開発哲学
2. /docs/SCOPE_PROGRESS.md - 現在の進捗状況

さらに、参照用サンプルとして以下のファイルも確認してください：
3. /refference/HinagoProject★5/shared/index.ts - サンプル型定義とAPIパス
4. /refference/HinagoProject★5/docs/api/openapi.yaml - サンプルAPI仕様

注意：HinagoProject★5は、AppGeniusツールを使って要件定義書から生成されたサンプルプロジェクトです。
これはAppGeniusの機能を示すためのデモンストレーション例であり、実際に作成しようとしているものではありません。
サンプルのモックアップや実装アプローチ、ディレクトリ構造などは参考資料として活用してください。

その上で、AppGeniusプロジェクトにおける開発プロセスと設計パターンについて相談があります。
このプロジェクトは「ClaudeCodeを中心とした開発」「ドキュメント中心設計」「コントラクトファーストアプローチ」「垂直スライス方式による実装戦略」を採用しています。

具体的に相談したいのは：
[具体的な相談内容を記載：例「実装フェーズでのバックエンド/フロントエンド開発順序」「垂直スライス方式の実装戦略」など]

重要：この会話の目的は特定の実装やコード生成の依頼ではなく、開発プロセスや設計パターンの一般的なベストプラクティスについて相談することです。HinagoProjectの内容を実装するのではなく、そのアプローチから学び、AppGeniusの開発に活かすための助言を求めています。
```

# 2. 開発フロー
## 0. プロジェクト開始

プロジェクトが開始されると以下の初期構造から始まります：

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント（*0）
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*0）
│
└── mockups/                        # モックアップのルートディレクトリ（空）
```

初期ファイルは以下のテンプレートに基づきます：

- **CLAUDE.md** - `/docs/templates/CLAUDETEMPLATE.md` から生成
  ```
  # プロジェクト名
  ## System Instructions
  ## エンジニアリング姿勢と倒理
    ### コード品質の原則
    ### 説明と透明性
    ### 持続可能性
    ### ミニマリストの原則
  ## データモデル管理について
  ## プロジェクト概要
  ## 開発規約
  ## プロジェクト情報
  ```

- **SCOPE_PROGRESS.md** - `/docs/templates/SCOPE_PROGRESS_TEMPLATE.md` から生成
  ```
  # [プロジェクト名] 開発プロセス進捗状況
  ## 1. 基本情報
  ## 2. 実装概要
  ## 3. 参照ドキュメント
  ## 4. 開発フロー進捗状況
  ## 5. タスクリスト
    ### プロジェクト準備フェーズ
    ### 要件定義フェーズ
    ### 技術選定フェーズ
  ## 6. 次のステップ
  ## 7. エラー引き継ぎログ
  ## 8. 付録
    ### A. プロジェクト開発標準フロー
    ### B. AIエージェント活用ガイド
  ```

## 1 要件定義

### 対応エージェント *1レコンX（要件定義エージェント）
- **役割**: 非技術者の言葉を開発チームが実装できる形式に変換し、プロジェクトの基礎となる「要件の設計図」を提供する専門家
- **思考プロセス**:
  - Phase#0: 新規/既存プロジェクトの把握
  - Phase#1: プロジェクト情報収集（YMSV法で本質から掘り下げる）
  - Phase#2: 機能要件策定（ユーザーストーリー収集、機能要件変換、優先度付け）
  - Phase#3: 画面要素とページ構成の設計（UI要素抜き出し、システム構造検討、画面遷移フロー設計）
  - Phase#4: 要件定義書作成（標準テンプレートに沿った文書化）
  - Phase#5: SCOPE_PROGRESS更新
- **入力**: クライアント要望資料、業界標準、競合分析、既存コードベース（既存プロジェクトの場合）
- **成果物**: 
  - docs/requirements.md：詳細な要件定義書（目的、ターゲットユーザー、機能要件、画面一覧、データモデル概要を含む）
  - SCOPE_PROGRESS.mdの更新：次の実装ステップの指定
- **ファイル場所**: `/docs/prompts/★1requirements_creator.md`

要件定義フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── requirements.md             # プロジェクト全体の要件定義書（*1の成果物）
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*1による更新）
│
└── mockups/                        # モックアップのルートディレクトリ（次フェーズで使用）
```

- **requirements.md** 
  目次構成:
  ```
  # [プロジェクト名] 要件定義書
  
  **バージョン**: x.x.x  
  **最終更新日**: YYYY-MM-DD  
  **ステータス**: ドラフト/レビュー中/承認済み  
  
  ## 1. プロジェクト概要
  
    ### 1.1 目的と背景
    ### 1.2 ターゲットユーザー
    ### 1.3 核となる機能と価値
  
  ## 2. 画面一覧
  
    ### 2.1 画面要素一覧
    ### 2.2 ページ構成計画
      #### 2.2.1 共通ページ
      #### 2.2.2 [サブシステム名#1]
      #### 2.2.3 [サブシステム名#2]
    ### 2.3 画面フロー
      #### 2.3.1 認証フロー
      #### 2.3.2 [サブシステム名#1]フロー
      #### 2.3.3 [サブシステム名#2]フロー
  
  ## 3. ページ詳細
  
    ### 3.1 共通ページ
      #### 3.1.1 [ページ名] (P-XXX)
    ### 3.2 [サブシステム1名]
      #### 3.2.1 [ページ名] (S1-XXX)
    ### 3.3 [サブシステム2名]
      #### 3.3.1 [ページ名] (S2-XXX)
  
  ## 4. 共通コンポーネント
  
  ## 5. データモデル概要
  
    ### 5.1 主要エンティティ
  
  ## 6. 特記すべき非機能要件
  
  ## 7. 開発計画とマイルストーン
  
  ## 8. 添付資料
  ```

## 2 モックアップ作成

### 対応エージェント *2モックアップクリエイター（UI/UX設計者）
- **役割**: 要件定義書を基にUI/UX設計を行い、1枚のHTMLモックアップを作成するスペシャリスト
- **思考プロセス**:
  - Phase#1: 要件分析（requirements.mdをベースに機能要件とユーザーストーリーを理解）
  - Phase#2: 情報アーキテクチャ設計（ナビゲーション構造、画面階層、主要コンポーネントの配置）
  - Phase#3: ユーザーインターフェース設計（各画面のレイアウト、インタラクション方法の定義）
  - Phase#4: HTMLモックアップの作成（動作可能な静的HTML/CSS/JSファイルの構築）
  - Phase#5: SCOPE_PROGRESS更新
- **入力**: 
  - docs/requirements.md：要件定義書
- **成果物**: 
  - mockups/ディレクトリ内のHTMLファイル(1枚モックアップ)
  - SCOPE_PROGRESS.mdの更新：モックアップ完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★2mockup_creatorandanalyzer.md`

モックアップ作成フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── requirements.md             # プロジェクト全体の要件定義書
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*2による更新）
│
└── mockups/                        # モックアップのルートディレクトリ
    ├── dashboard.html              # ダッシュボード画面のモックアップ（*2の成果物）
    └── login.html                  # ログイン画面のモックアップ（*2の成果物）

```

## 3 データモデル設計

### 対応エージェント *3データモデルアーキテクト（型定義統括エンジニア）
- **役割**: 要件定義書とモックアップに基づくデータ構造設計、エンティティ関係定義、型システム設計、機能中心ディレクトリ構造の設計
- **思考プロセス**:
  - Phase#1: 要件とモックアップ分析（データの種類と関係性、操作の特定）
  - Phase#2: エンティティ関係モデリング（主要オブジェクト、リレーション、カーディナリティの定義）
  - Phase#3: 型システム設計（TypeScriptインターフェース、型エイリアス、列挙型の定義）
  - Phase#4: データアクセスパターン最適化（検索、フィルタリング、ソートのための構造検討）
  - Phase#5: APIインターフェース設計の下準備（リクエスト/レスポンス型の定義）
  - Phase#6: 機能中心ディレクトリ構造設計（非技術者にも理解しやすい機能単位のプロジェクト構造設計）
  - Phase#7: shared/index.ts作成とSCOPE_PROGRESS更新
- **入力**: 
  - docs/requirements.md：要件定義書
  - mockups/：HTMLモックアップ一式
- **成果物**: 
  - shared/index.ts：すべての型定義とAPIパスを含む統合ファイル
  - docs/directory_structure.md：機能中心ディレクトリ構造の設計書
  - 要件定義書のデータモデルセクション更新
  - SCOPE_PROGRESS.mdの更新：データモデル完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★3data_model_assistant_generic.md`

データモデル設計フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── directory_structure.md      # 機能中心ディレクトリ構造の設計書（*3の成果物）
│   ├── requirements.md             # プロジェクト全体の要件定義書
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*3による更新）
│
├── mockups/                        # モックアップのルートディレクトリ
│   ├── dashboard.html              # ダッシュボード画面のモックアップ
│   └── ...                         # その他のモックアップファイル
│
└── shared/                         # 共有定義ディレクトリ
    └── index.ts                    # 型定義とAPIパスの単一の真実源（*3の成果物）
```

## 4 システムアーキテクチャ設計

### 対応エージェント *4アーキテクチャデザイナー（システム構造設計者）
- **役割**: システム全体の構造と認証基盤を設計する専門家
- **思考プロセス**:
  - Phase#1: 要件・データモデル・認証要件の分析
  - Phase#2: システム全体アーキテクチャ設計（モジュール構造、依存関係、通信方式）
  - Phase#3: 認証・認可システム設計（ユーザーロール、権限モデル、認証フロー）
  - Phase#4: ディレクトリ構造設計（フロントエンド/バックエンドの基本構成）
  - Phase#5: アクセス制御マトリックス作成（ユーザーロールと機能のマッピング）
  - Phase#6: 設計ドキュメント作成とSCOPE_PROGRESS更新
- **入力**: 
  - docs/requirements.md：要件定義書
  - shared/index.ts：データモデル
  - 認証要件ヒアリング結果（セキュリティ要件についての追加情報）
- **成果物**: 
  - docs/architecture/auth-system-design.md：認証システム設計書
  - docs/architecture/access-control.md：アクセス制御マトリックス
  - SCOPE_PROGRESS.mdの更新：アーキテクチャ設計完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★4architecture-designer.md`

アーキテクチャ設計フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── architecture/               # アーキテクチャ関連ドキュメント（*4の成果物）
│   │   ├── auth-system-design.md   # 認証システム設計書（*4の成果物）
│   │   └── access-control.md       # アクセス制御マトリックス（*4の成果物）
│   ├── directory_structure.md      # 機能中心ディレクトリ構造の設計書（*3の成果物）
│   ├── requirements.md             # プロジェクト全体の要件定義書
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*4による更新）
│
├── mockups/                        # モックアップのルートディレクトリ
│   └── ...                         # モックアップファイル群
│
└── shared/                         # 共有定義ディレクトリ
    └── index.ts                    # 型定義とAPIパスの単一の真実源
```

## 5 API設計

### 対応エージェント *5APIデザイナー（RESTful APIアーキテクト）
- **役割**: データモデルや認証システム設計に基づいて最適なRESTful API設計を行い、フロントエンドとバックエンドを結ぶ一貫性のあるAPI仕様を定義する専門家
- **思考プロセス**:
  - ステップ0: 準備分析（要件・データモデル・認証設計の理解）
  - ステップ1: API設計原則の確立（共通規則・標準レスポンス形式の定義）
  - ステップ2: 認証関連API仕様の設計（認証フロー・エンドポイント定義）
  - ステップ3: エンドポイント一覧の作成（全APIの一覧化と権限要件の明示）
  - ステップ4: リソース別API仕様の設計（詳細なリクエスト/レスポンス定義）
  - ステップ5-7: 関連ドキュメント更新（要件定義・型定義・進捗管理の更新）
- **入力**: 
  - docs/requirements.md：ビジネス要件
  - shared/index.ts：型定義とAPIパス
  - docs/architecture/auth-system-design.md：認証システム設計書
  - docs/architecture/access-control.md：アクセス制御マトリックス
  - mockups/：UI/UXフロー
- **成果物**: 
  - docs/api/index.md：API概要、共通規則
  - docs/api/auth.md：認証関連API仕様書
  - docs/api/endpoints.md：エンドポイント一覧と説明
  - docs/api/[resource].md：リソース別API仕様書（複数ファイル）
  - shared/index.ts：APIパスとリクエスト/レスポンス型の追加・更新
  - SCOPE_PROGRESS.md：API設計完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★5api-designer.md`

API設計フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── architecture/               # アーキテクチャ関連ドキュメント（参照）
│   │   ├── auth-system-design.md   # 認証システム設計書（参照）
│   │   └── access-control.md       # アクセス制御マトリックス（参照）
│   │
│   ├── api/                        # API関連ドキュメント（*5の成果物）
│   │   ├── index.md                # API概要、共通規則
│   │   ├── auth.md                 # 認証関連API仕様書
│   │   ├── endpoints.md            # エンドポイント一覧と説明
│   │   ├── users.md                # ユーザーリソースAPI仕様書
│   │   └── [other-resources].md    # その他のリソース別API仕様書
│   │
│   ├── requirements.md             # プロジェクト全体の要件定義書（*5による更新）
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*5による更新）
│
├── mockups/                        # モックアップのルートディレクトリ
│   └── ...                         # モックアップファイル群
│
└── shared/                         # 共有定義ディレクトリ
    └── index.ts                    # 型定義とAPIパスの単一の真実源（*5による更新）
```

## 6 垂直スライス計画

### 対応エージェント *6垂直スライスプランナー（データフロー中心実装戦略エージェント）
- **役割**: 要件定義書やAPI定義、データモデルを分析し、実際の本番環境でのデータフローを考慮した最適な垂直スライス実装順序を策定する専門家
- **思考プロセス**:
  - フェーズ1: プロジェクト分析（要件・データモデル・API定義・アーキテクチャの理解）
  - フェーズ2: データ依存関係分析と垂直スライス特定
    - エンティティ間の依存関係を分析し、データの自然な流れを把握
    - 機能単位で完結可能なスライスを特定
    - 依存関係を考慮した実装順序の決定
  - フェーズ3: 実装計画書の作成
    - 垂直スライスの一覧と優先順位の決定
    - 各スライスの詳細な実装タスクリストの作成
    - クロスカッティング・コンサーン（横断的関心事）の特定
    - スライス間の統合ポイントの明確化
    - リスクと対策の策定
    - 実装スケジュールの設計
  - フェーズ4: SCOPE_PROGRESSの更新
- **入力**: 
  - docs/requirements.md：要件定義書
  - shared/index.ts：データモデル
  - docs/api/openapi.yaml：API定義
  - docs/architecture/：アーキテクチャ関連ドキュメント
- **成果物**: 
  - docs/plans/implementation-plan.md：垂直スライス実装計画書
  - SCOPE_PROGRESS.md：実装計画完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★6Sliceplaner.md`

垂直スライス計画フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── architecture/               # アーキテクチャ関連ドキュメント
│   │   ├── auth-system-design.md   # 認証システム設計書
│   │   └── access-control.md       # アクセス制御マトリックス
│   │
│   ├── api/                        # API関連ドキュメント
│   │   ├── index.md                # API概要、共通規則
│   │   ├── auth.md                 # 認証関連API仕様書
│   │   ├── endpoints.md            # エンドポイント一覧と説明
│   │   ├── users.md                # ユーザーリソースAPI仕様書
│   │   └── [other-resources].md    # その他のリソース別API仕様書
│   │
│   ├── plans/                      # 計画ドキュメント
│   │   └── implementation-plan.md  # 垂直スライス実装計画書（*6の成果物）
│   │
│   ├── requirements.md             # プロジェクト全体の要件定義書
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*6による更新）
│
├── mockups/                        # モックアップのルートディレクトリ
│   └── ...                         # モックアップファイル群
│
└── shared/                         # 共有定義ディレクトリ
    └── index.ts                    # 型定義とAPIパスの単一の真実源
```

## 7 環境変数セットアップ

### 対応エージェント *7環境変数収集アシスタント
- **役割**: モックアップや仮の値ではなく、実際の本番環境で使用する秘密鍵やAPIキーを収集し、適切な環境変数ファイルに設定する専門家。技術知識の少ないユーザーでも適切な環境変数とアカウント設定を完了できるよう手厚く支援する。
- **思考プロセス**:
  - ステップ1: プロジェクト要件の分析（必要な環境変数の種類を特定）
    - バックエンド環境設定（PORT, NODE_ENV など）
    - データベース接続設定
    - 外部APIキー（認証、AI、サードパーティサービスなど）
    - フロントエンド環境変数（VITE_など）
    - ログやモニタリング設定
  - ステップ2: 外部サービスアカウント開設のガイド
    - Gitリポジトリサービス（GitHub/GitLab等）のアカウント作成と初期設定
    - クラウドサービス（GCP/AWS/Firebase等）のプロジェクト作成と設定
    - データベースサービス（MongoDB等）の設定と接続情報取得
    - サードパーティサービスとAPI連携（Anthropic API、OpenAI API等）
  - ステップ3: 必要な環境変数リストの抽出
    - プロジェクト分析に基づく環境変数リストの作成
    - 実際の値と未設定値（プレースホルダー）の区別
  - ステップ4: 環境変数リストの整理
    - 実際の値として機能するものを上位に配置
    - プレースホルダーを下位に配置し、明確な優先順位付け
  - ステップ5: 質問リストの作成
    - データベースの種類と接続情報
    - 使用する認証サービスとアクセスキー
    - AIサービスとAPIキー
    - その他のサードパーティサービス
    - システム固有の設定値
  - ステップ6: 段階的な情報収集
    - 基本設定（ポート番号、環境名、基本URL）
    - データベース設定
    - 認証サービス
    - 外部API
    - フロントエンド設定
  - ステップ7: 環境変数ファイルの作成と配置
    - 適切なディレクトリ構造に基づく環境変数ファイルの分割と配置
    - バックエンド用・フロントエンド用の環境変数ファイル作成
  - ステップ8: ローカル環境の検証とトラブルシューティング
    - 設定した環境変数で実際にアプリケーションが動作するか検証
    - 問題が見つかった場合の修正手順とドキュメント記録
  - ステップ9: Gitの初期設定と初回プッシュ
    - GitHubリポジトリの設定とリモート登録
    - GitHookの作成（機密情報チェック、コミットメッセージ日時自動追加）
    - 初期コミットと設定内容のプッシュ
- **入力**: 
  - docs/requirements.md：要件定義書（必要なサービスを特定）
  - shared/index.ts：データモデル（データベース接続要件の特定）
  - docs/architecture/：認証システム設計書（認証関連設定の特定）
  - ユーザーから直接収集した実際のAPIキーや接続情報
- **成果物**: 
  - `.env`：ルート作業用環境変数ファイル（分割後は削除可能）
  - バックエンド用環境変数ファイル（`.env`）
  - フロントエンド開発用環境変数ファイル（`.env.development`）
  - フロントエンド本番用環境変数ファイル（`.env.production`）
  - `.gitignore`：機密情報保護のためのGit除外設定
  - `.git/hooks/pre-commit`：コミット前の機密情報チェックスクリプト
  - `.git/hooks/prepare-commit-msg`：コミットメッセージへの日時自動追加スクリプト
  - `docs/deployment/deploy.md`：デプロイ情報引き継ぎドキュメント
  - `docs/deployment/troubleshooting.md`：トラブルシューティングガイド
  - SCOPE_PROGRESS.md：環境設定完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★7env_assistant.md`

環境変数セットアップフェーズ後のディレクトリ構造:

```
 project/
  │
  │
  ├── CLAUDE.md                      # プロジェクト中心ドキュメント
  ├── .env                          # 作業用.envファイル(分割後安全に削除可)
  ├── バックエンドフォルダ              # バックエンドのルートディレクトリ
  │   └── .env                      # バックエンド環境変数ファイル（*7の成果物）
  ├── .git/                         # Gitリポジトリ情報
  │   └── hooks/                    # Gitフック（*7の成果物）
  │       └── prepare-commit-msg    # コミットメッセージに日時を自動追加（*7の成果物）
  ├── .gitignore                    # gitignore（*7の成果物）
  │
  ├── フロントエンドフォルダ             # フロントエンドのルートディレクトリ
  │   ├── .env.development           # フロントエンド開発用環境変数ファイル（*7の成果物）
  │   └── .env.production            # フロントエンド本番用環境変数ファイル（*7の成果物）
  │
  ├── docs/                          # ドキュメントのルートディレクトリ
  │   ├── architecture/              # アーキテクチャ関連ドキュメント
  │   │   ├── auth-system-design.md  # 認証システム設計書
  │   │   └── access-control.md      # アクセス制御マトリックス
  │   ├── directory_structure.md     # 機能中心ディレクトリ構造の設計書
  │   ├── api/                       # API関連ドキュメント
  │   │   ├── index.md               # API概要、共通規則
  │   │   ├── auth.md                # 認証関連API仕様書
  │   │   ├── endpoints.md           # エンドポイント一覧と説明
  │   │   ├── users.md               # ユーザーリソースAPI仕様書
  │   │   └──[other-resources].md   # その他のリソース別API仕様書
  │   ├── deployment/                # デプロイ関連ドキュメント（*7による作成）
  │   │   ├── deploy.md              # デプロイ引き継ぎ情報ドキュメント（*7の成果物）
  │   │   └── troubleshooting.md     # トラブルシューティングガイド（*7の成果物）
  │   ├── plans/                     # 計画ドキュメント
  │   │   └── implementation-plan.md  # 垂直スライス実装計画書
  │   ├── requirements.md            # プロジェクト全体の要件定義書
  │   └── SCOPE_PROGRESS.md          # スコープ進捗状況とタスクリスト（*7による更新）
  │
  ├── mockups/                       # モックアップのルートディレクトリ
  │   └── ...                        # モックアップファイル群
  │
  └── shared/                        # 共有定義ディレクトリ
      └── index.ts                   # 型定義とAPIパスの単一の真実源
```

#### 重要な環境変数カテゴリと一般的な項目

**1. サーバー基本設定**
- `PORT` - アプリケーションのポート番号
- `NODE_ENV` - 環境名（development/test/production）
- `API_BASE_URL` - APIのベースURL

**2. データベース接続**
- MongoDB接続文字列またはホスト・ポート・認証情報
- SQL系データベース接続情報

**3. 認証設定**
- JWT設定（シークレットキー、有効期限）
- OAuth/Firebase/Auth0認証情報

**4. 外部APIキー**
- AI API（Anthropic/OpenAI）キー
- 地図・位置情報サービスAPIキー
- 支払い処理サービスキー
- メール送信サービス認証情報

**5. フロントエンド設定**
- バックエンドAPIのURL
- 環境名
- マップ表示用キー（公開可能なもの）

**6. ファイルアップロード設定**
- ストレージパス、制限サイズ、許可ファイル形式

**7. ログ・モニタリング設定**
- ログレベル、ログファイルパス
- 監視サービス設定

## 8 垂直スライスバックエンド実装

### 対応エージェント *8垂直スライスバックエンド実装エージェント
- **役割**: 垂直スライス方式で定義された機能単位のバックエンド部分を実装し、データベースからコントローラーまでの全層を一貫して実装する専門家
- **思考プロセス**:
  - フェーズ0: TypeScriptエラーゼロ確認（最優先）
    - `npx tsc --noEmit`コマンドでエラーチェック
    - エラーが一つでもある場合は、作業を中断してエラー修正に集中
  - フェーズ1: 垂直スライス分析
    - スライス境界の把握（範囲と依存関係の確認）
    - 関連データモデルの分析（型定義とエンティティ関係）
    - API仕様の確認（エンドポイントとリクエスト/レスポンス形式）
  - フェーズ2: テスト戦略策定
    - 垂直スライスのテスト分析
    - データベース中心テスト戦略の確立
    - テストピラミード最適化
  - フェーズ3-6: 各層の実装とテスト
    - データベース層：スキーマ定義、マイグレーション、シードデータ
    - リポジトリ層：データアクセスロジックとCRUD操作
    - サービス層：ビジネスロジックと処理フロー
    - コントローラー層：APIエンドポイントとリクエスト処理
  - フェーズ7: 統合テストと検証
    - バックエンド統合テスト
    - パフォーマンステスト
    - セキュリティテスト
- **入力**: 
  - docs/plans/implementation-plan.md：垂直スライス実装計画書
  - shared/index.ts：データモデル定義
  - 環境変数設定（.envファイル）
- **成果物**: 
  - server/src/models/：データベースモデル実装
  - server/src/repositories/：データアクセス層実装
  - server/src/services/：ビジネスロジック層実装
  - server/src/controllers/：APIエンドポイント実装
  - server/src/routes/：ルーティング設定
  - server/src/middlewares/：ミドルウェア実装
  - server/tests/：各層のテストコード
  - SCOPE_PROGRESS.md：バックエンド実装完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★8vertical-slice-backend-implementation-agent-improved.md`

垂直スライスバックエンド実装フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── .env                           # 環境変数ファイル
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── api/                        # API関連ドキュメント
│   │   ├── openapi.yaml            # OpenAPI/Swagger仕様
│   │   └── ...                     # その他API関連ドキュメント
│   │
│   ├── plans/                      # 計画ドキュメント
│   │   └── implementation-plan.md  # 垂直スライス実装計画書
│   │
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*8による更新）
│
├── server/                         # バックエンドのルートディレクトリ
│   ├── src/                        # ソースコードディレクトリ
│   │   ├── models/                 # データベースモデル（*8の成果物）
│   │   ├── repositories/           # データアクセス層（*8の成果物）
│   │   ├── services/               # ビジネスロジック層（*8の成果物）
│   │   ├── controllers/            # APIエンドポイント（*8の成果物）
│   │   ├── routes/                 # ルーティング設定（*8の成果物）
│   │   └── middlewares/            # ミドルウェア（*8の成果物）
│   │
│   └── tests/                      # テストディレクトリ（*8の成果物）
│       ├── models/                 # モデルテスト
│       ├── repositories/           # リポジトリテスト
│       ├── services/               # サービステスト
│       ├── controllers/            # コントローラーテスト
│       └── integration/            # 統合テスト
│
└── shared/                         # 共有定義ディレクトリ
    └── index.ts                    # 型定義とAPIパスの単一の真実源
```

## 9 垂直スライスフロントエンド実装

### 対応エージェント *9垂直スライスフロントエンド実装エージェント
- **役割**: 垂直スライス方式で定義された機能単位のフロントエンド部分を実装し、UIコンポーネント、状態管理、API連携を含む完全なフロントエンド機能を提供する専門家
- **思考プロセス**:
  - フェーズ0: TypeScriptエラーゼロ確認（最優先）
    - `npx tsc --noEmit`コマンドでエラーチェック
    - エラーが一つでもある場合は、作業を中断してエラー修正に集中
  - フェーズ1: 垂直スライス分析
    - スライス境界の把握（範囲と依存関係の確認）
    - モックアップ分析（UI要素とインタラクション特定）
    - OpenAPI仕様の確認（APIと型の確認）
  - フェーズ2: テスト戦略策定
    - テスト範囲の定義
    - テストピラミードの最適化
    - テスト優先順位の確立
  - フェーズ3-7: 各層の実装とテスト
    - コンポーネント設計と実装
    - 状態管理と共有ロジックの実装
    - APIサービス実装
    - フォームとバリデーション実装
    - ルーティングとナビゲーション実装
  - フェーズ8-9: 統合とスタイリング
    - ユーザーフロー統合テスト
    - スタイリングとレスポンシブデザイン
- **入力**: 
  - docs/plans/implementation-plan.md：垂直スライス実装計画書
  - mockups/：モックアップファイル
  - docs/api/openapi.yaml：API仕様
  - shared/index.ts：データモデル定義
- **成果物**: 
  - client/src/components/：UIコンポーネント実装
  - client/src/hooks/：カスタムフック実装
  - client/src/contexts/：コンテキスト実装
  - client/src/api/：APIクライアント実装
  - client/src/pages/：ページコンポーネント実装
  - client/src/utils/：ユーティリティ関数
  - client/src/routes/：ルーティング設定
  - client/tests/：テストコード
  - SCOPE_PROGRESS.md：フロントエンド実装完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★9vertical-slice-frontend-implementation-agent.md`

垂直スライスフロントエンド実装フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── .env                           # 環境変数ファイル
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── api/                        # API関連ドキュメント
│   │   ├── openapi.yaml            # OpenAPI/Swagger仕様
│   │   └── ...                     # その他API関連ドキュメント
│   │
│   ├── plans/                      # 計画ドキュメント
│   │   └── implementation-plan.md  # 垂直スライス実装計画書
│   │
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*9による更新）
│
├── client/                         # フロントエンドのルートディレクトリ
│   ├── src/                        # ソースコードディレクトリ
│   │   ├── components/             # UIコンポーネント（*9の成果物）
│   │   │   ├── auth/               # 認証関連コンポーネント
│   │   │   │   ├── LoginForm.tsx   # ログインフォーム
│   │   │   │   └── ...             # その他認証コンポーネント
│   │   │   ├── common/             # 共通コンポーネント
│   │   │   └── ...                 # 機能別コンポーネント
│   │   │
│   │   ├── hooks/                  # カスタムフック（*9の成果物）
│   │   │   ├── useAuth.ts          # 認証関連フック
│   │   │   ├── useForm.ts          # フォーム管理フック
│   │   │   └── ...                 # その他カスタムフック
│   │   │
│   │   ├── contexts/               # Reactコンテキスト（*9の成果物）
│   │   │   ├── AuthContext.tsx     # 認証コンテキスト
│   │   │   └── ...                 # その他コンテキスト
│   │   │
│   │   ├── api/                    # APIクライアント（*9の成果物）
│   │   │   ├── generated/          # OpenAPIから生成された型と関数
│   │   │   ├── authService.ts      # 認証サービス
│   │   │   └── ...                 # その他APIサービス
│   │   │
│   │   ├── pages/                  # ページコンポーネント（*9の成果物）
│   │   │   ├── auth/               # 認証関連ページ
│   │   │   │   ├── LoginPage.tsx   # ログインページ
│   │   │   │   └── ...             # その他認証ページ
│   │   │   └── ...                 # その他機能ページ
│   │   │
│   │   ├── utils/                  # ユーティリティ関数（*9の成果物）
│   │   │   ├── validation.ts       # バリデーション関数
│   │   │   └── ...                 # その他ユーティリティ
│   │   │
│   │   ├── routes/                 # ルーティング設定（*9の成果物）
│   │   │   ├── ProtectedRoute.tsx  # 保護されたルート
│   │   │   └── RouteConfig.tsx     # ルート設定
│   │   │
│   │   └── App.tsx                 # アプリケーションエントリポイント（*9の成果物）
│   │
│   └── tests/                      # テストディレクトリ（*9の成果物）
│       ├── components/             # コンポーネントテスト
│       ├── hooks/                  # カスタムフックテスト
│       ├── api/                    # API連携テスト
│       └── e2e/                    # エンドツーエンドテスト
│
├── server/                         # バックエンドのルートディレクトリ
│
└── shared/                         # 共有定義ディレクトリ
    └── index.ts                    # 型定義とAPIパスの単一の真実源
```

## 10 デプロイ戦略

### 対応エージェント *10Google Cloud Runデプロイ専門アシスタント
- **役割**: Google Cloud Runを使用したサーバーアプリケーションデプロイを支援し、バックエンドとフロントエンドの両方のスムーズなデプロイと問題のトラブルシューティングを行う専門家
- **思考プロセス**:
  - ステップ1: デプロイ前の準備
    - コンテナ化の最適化（効率的なDockerfileの作成、マルチステージビルドの活用）
    - 環境変数とシークレットの設定（Secret Managerでの機密情報管理）
    - ビルド時のベストプラクティス（依存関係の効率的なインストール、コンパイル最適化）
  - ステップ2: バックエンドデプロイとモニタリング
    - デプロイコマンドの最適化（`gcloud run deploy`の適切なパラメータ設定）
    - トラフィック管理（段階的移行、ロールバックプラン）
    - デプロイ後検証（ヘルスチェック、エンドポイント動作確認）
  - ステップ3: フロントエンドデプロイ
    - Firebase Hostingの活用（複数サイト設定、環境変数管理）
    - 継続的デプロイの設定（GitHub Actionsによる自動デプロイ）
  - ステップ4: デプロイエラーログの記録と管理
    - deploy-history.md維持（デプロイ履歴の記録）
    - 体系的なログ分析（エラーパターンの特定と解決策の蓄積）
- **入力**: 
  - プロジェクトのソースコード
  - 環境変数設定（`.env`ファイル）
  - Google Cloudの認証情報
  - Firebase設定（フロントエンド用）
- **成果物**: 
  - `docs/deployment/deploy.md`：デプロイ手順書
  - `docs/deployment/deploy-history.md`：デプロイ履歴と問題解決記録
  - `Dockerfile`：最適化されたDockerfile
  - デプロイスクリプト（`deploy.sh`など）
  - SCOPE_PROGRESS.md：デプロイ設定完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★10deploy_assistant.md`

デプロイ戦略フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── .env                           # 環境変数ファイル
├── Dockerfile                     # バックエンド用Dockerfile（*10の成果物）
├── deploy.sh                      # デプロイスクリプト（*10の成果物）
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── deployment/                 # デプロイ関連ドキュメント（*10の成果物）
│   │   ├── deploy.md              # デプロイ手順書
│   │   └── deploy-history.md      # デプロイ履歴と問題解決記録
│   │
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*10による更新）
│
├── .github/                        # GitHub設定（*10の成果物）
│   └── workflows/                  # GitHub Actionsワークフロー
│       ├── deploy-backend.yml      # バックエンドデプロイワークフロー
│       └── deploy-frontend.yml     # フロントエンドデプロイワークフロー
│
├── client/                         # フロントエンドのルートディレクトリ
│   └── firebase.json               # Firebase設定ファイル（*10の成果物）
│
└── shared/                         # 共有定義ディレクトリ
    └── index.ts                    # 型定義とAPIパスの単一の真実源
```

## 11 ソースコード管理

### 対応エージェント *11GitHubアップロードマネージャー
- **役割**: GitHubへのコード安全なアップロード・管理を支援し、作業の永続性と復元可能性を保証する専門家
- **思考プロセス**:
  - ステップ1: 作業保全チェック
    - すべての変更が保存されているか確認
    - 未追跡ファイルの完全なリスト表示
    - 部分コミットのリスク警告表示
  - ステップ2: 機密情報検出と対策
    - センシティブ情報の検出（APIキー、パスワードなど）
    - .envファイルへの移動（機密情報は環境変数化）
    - .gitignoreへの追加確認
  - ステップ3: 全体コミット手順
    - センシティブファイル以外のすべてのファイルを追跡
    - 常に状態可視化後にコミット
  - ステップ4: 安全なプッシュ準備
    - gitignoreとセンシティブファイル検出
    - コミット前後の状態比較と表示
  - ステップ5: 完全バックアップの確保
    - 重要な変更前には作業ディレクトリの外部バックアップ推奨
    - ローカルブランチによるセーフティネット作成
- **入力**: 
  - プロジェクトのソースコード
  - .gitignoreファイル
  - コミット対象のファイル
- **成果物**: 
  - `.gitignore`：センシティブ情報を除外する設定
  - 安全なコミット履歴
  - ブランチ戦略ガイドライン
  - SCOPE_PROGRESS.md：リポジトリ管理設定完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★11gitmanager.md`

ソースコード管理フェーズ後のディレクトリ構造:

```
project/
│ 
├── CLAUDE.md                      # プロジェクト中心ドキュメント
│ 
├── .gitignore                     # センシティブ情報を除外する設定（*11の成果物）
├── .env                           # 環境変数ファイル（.gitignoreにより追跡対象外）
├── Dockerfile                     # バックエンド用Dockerfile
├── deploy.sh                      # デプロイスクリプト
│ 
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── deployment/                 # デプロイ関連ドキュメント
│   │   ├── deploy.md              # デプロイ手順書
│   │   └── deploy-history.md      # デプロイ履歴と問題解決記録
│   │
│   ├── git/                        # Git関連ドキュメント（*11の成果物）
│   │   └── branch-strategy.md      # ブランチ戦略ガイドライン
│   │
│   └── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（*11による更新）
│
├── .github/                        # GitHub設定
│   └── workflows/                  # GitHub Actionsワークフロー
│       ├── deploy-backend.yml      # バックエンドデプロイワークフロー
│       └── deploy-frontend.yml     # フロントエンドデプロイワークフロー
│
└── shared/                         # 共有定義ディレクトリ
    └── index.ts                    # 型定義とAPIパスの単一の真実源
```

## 12 TypeScriptエラー解決

### 対応エージェント *12TypeScript型エラー解決スペシャリスト
- **役割**: プロジェクト全体のTypeScriptコンパイルエラーを系統的に分析し解決する専門家。垂直スライス実装前に型の整合性を保証し、開発のスムーズな進行を支援する
- **思考プロセス**:
  - フェーズ1: エラー収集と分類
    - `npx tsc --noEmit`コマンドで全エラーを収集
    - エラーを種類別に分類（型不一致、未定義変数、インポート問題、etc）
    - 優先度付け（最重要エラーから解決）
  - フェーズ2: 根本原因分析
    - 型定義ファイル（shared/index.ts）との整合性チェック
    - 依存関係グラフ作成（エラーの連鎖反応を理解）
    - OpenAPI仕様との不一致検出
  - フェーズ3: エラー解決計画
    - 最小変更アプローチの策定
    - 解決案の優先順位付け
    - 副作用の可能性評価
  - フェーズ4: エラー修正の実装
    - 基本型定義の修正
    - インターフェースと型の整合性確保
    - 欠落したプロパティやメソッドの追加
    - 非互換性のあるコードの修正
  - フェーズ5: 再テストと検証
    - `npx tsc --noEmit`の再実行
    - エラーゼロの確認
    - エラー解決レポートの作成
- **入力**: 
  - tsconfig.json：TypeScript設定
  - shared/index.ts：共有型定義
  - docs/api/openapi.yaml：API仕様
  - プロジェクト全体のTypeScriptファイル
  - TypeScriptコンパイルエラーログ
- **成果物**: 
  - 修正されたTypeScriptファイル
  - 更新された型定義（必要に応じて）
  - TypeScriptエラー解決レポート
  - SCOPE_PROGRESS.md：エラー解決完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★12TypeScreptManager.md`

TypeScriptエラー解決フェーズ後の状態:

```
TypeScriptコンパイル結果:
✓ Found 0 errors. Watching for file changes.
```

TypeScriptエラー解決の主な種類と解決アプローチ:

1. **型不一致エラー**:
   - インターフェース定義の更新
   - 適切な型アサーションの追加
   - ユニオン型による柔軟性の向上

2. **未定義変数/プロパティエラー**:
   - 欠落した変数やプロパティの追加
   - オプショナルプロパティ（`?:`）の導入
   - デフォルト値の設定

3. **インポート/エクスポートエラー**:
   - 正しいモジュールパスの設定
   - バレルファイル（index.ts）の最適化
   - 循環依存の解決

4. **非互換性エラー**:
   - 互換性のある型への変換
   - ユーティリティ型（Partial<T>, Pick<T, K>など）の活用
   - 型ガードの実装

5. **ライブラリ型エラー**:
   - 適切な@typesパッケージのインストール
   - カスタム型定義ファイル（.d.ts）の作成
   - 型定義の拡張とオーバーライド

## 13 デバッグ探偵

### 対応エージェント *13デバッグ探偵
- **役割**: 問題を特定し解決策を提案する専門家。コードのバグや障害を特定し、その根本原因を分析して効果的な解決策を提供する
- **思考プロセス**:
  - フェーズ1: 問題の定義と再現
    - エラーメッセージと症状の収集
    - 再現手順の特定と検証
    - 問題の範囲と影響の把握
  - フェーズ2: 根本原因分析
    - エラーログの詳細分析
    - コード追跡とデータフロー分析
    - 依存関係とコンテキストの調査
  - フェーズ3: 解決策の設計
    - 複数の解決アプローチの提案
    - 最適解の選定と評価
    - 副作用の予測と対策
  - フェーズ4: 実装とテスト
    - 解決策の実装計画作成
    - 修正コードの作成
    - テストケースの設計と検証
  - フェーズ5: ドキュメント化と防止策
    - 修正内容と修正理由の記録
    - 同様の問題を防ぐための推奨事項
    - 学習ポイントとナレッジベースの更新
- **入力**: 
  - エラーメッセージとスタックトレース
  - 問題発生時のログ
  - 関連するコードファイル
  - 環境情報（ブラウザ、OS、バージョンなど）
- **成果物**: 
  - バグ修正パッチまたはコード変更
  - デバッグレポート（根本原因と修正の説明）
  - 再発防止のための推奨事項
  - SCOPE_PROGRESS.md：デバッグ完了の記録と次ステップの指定
- **ファイル場所**: `/docs/prompts/★13debug_detective.md`

## 14 機能実装

### 対応エージェント *14機能実装アシスタント
- **役割**: 新機能の実装を支援するエキスパート。既存コードベースとの一貫性を保ちながら高品質な機能を実装する
- **思考プロセス**:
  - フェーズ1: 要件分析
    - 機能仕様の詳細理解
    - ユーザーストーリーとユースケースの確認
    - 既存システムとの統合ポイントの特定
  - フェーズ2: 設計と計画
    - 実装アプローチの選定
    - 詳細設計（コンポーネント、クラス、インターフェースなど）
    - タスク分解と実装順序の決定
  - フェーズ3: 実装と単体テスト
    - コーディング規約に沿った実装
    - ユニットテストの作成
    - エッジケースの考慮と対応
  - フェーズ4: 統合とテスト
    - 既存システムとの統合
    - 統合テストの実施
    - パフォーマンスとセキュリティの検証
  - フェーズ5: レビューと文書化
    - コードの自己レビュー
    - ドキュメントの作成・更新
    - SCOPE_PROGRESSの更新
- **入力**: 
  - 機能仕様書
  - 既存コードベース
  - デザインガイドラインとコーディング規約
- **成果物**: 
  - 実装コード（フロントエンド/バックエンド）
  - 単体テストと統合テスト
  - 技術文書の更新
  - SCOPE_PROGRESS.md：機能実装完了の記録
- **ファイル場所**: `/docs/prompts/★14feature_implementation_assistant.md`

## 15 リファクタリング

### 対応エージェント *15リファクタリングエキスパート
- **役割**: コードの品質改善とリファクタリングを担当する専門家。既存コードの可読性、保守性、効率性を向上させる
- **思考プロセス**:
  - フェーズ1: コード分析
    - コード品質の評価
    - 技術的負債の特定
    - リファクタリング対象領域の優先順位付け
  - フェーズ2: リファクタリング計画
    - リファクタリングの目標設定
    - リスク評価と対策
    - 実施計画の作成
  - フェーズ3: リファクタリング実施
    - コード構造の改善
    - パターンとベストプラクティスの適用
    - 冗長性の除去
  - フェーズ4: テストと検証
    - 機能回帰テスト
    - パフォーマンス評価
    - コード品質メトリクスの確認
  - フェーズ5: ドキュメント化
    - 変更内容の記録
    - 設計原則とパターンの文書化
    - SCOPE_PROGRESSの更新
- **入力**: 
  - リファクタリング対象のコード
  - 品質要件と目標
  - 既存のテストケース
- **成果物**: 
  - リファクタリングされたコード
  - 品質改善レポート
  - 設計ドキュメントの更新
  - SCOPE_PROGRESS.md：リファクタリング完了の記録
- **ファイル場所**: `/docs/prompts/★15refactoring_expert.md`
