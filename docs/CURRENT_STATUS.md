# AppGenius 理想的ドキュメント構造と開発フロー整備計画

## 1. 基本情報

- **ステータス**: 進行中 (77% 完了)
- **完了タスク数**: 12/16
- **進捗率**: 75.0%
- **最終更新日**: 2025-05-18

## 2. 実装概要

AppGeniusの開発プロセスを効率化するため、最適化されたドキュメント構造と開発フローを確立します。シンプルで論理的なドキュメントの階層構造を設計し、モックアップを中心としたAIエージェント協働システムを整備します。これにより、非技術者でも理解しやすい開発プロセスと、AIエージェント間の円滑な連携を実現します。

この計画は、後続のAIエージェントシステム完成計画（2025-05-20開始予定）の基盤となるものです。ドキュメント構造と開発フローの整備を通じて、各AIエージェントの能力を最大化し、相互連携を強化するための準備を行います。

## 3. 参照ドキュメントと成果物

### 設計・プロンプト関連
- **改善版開発方法論**: [improved_developmentway.md](/docs/refactoring/improved_developmentway.md)
- **開発方法論2.0**: [developmentway2.md](/docs/prompts/developmentway2.md)
- **開発会話記録**: [developmentConversation](/docs/prompts/developmentConversation)
- **AIエージェントシステム完成計画書**: [agent-system-enhancement-plan.md](/docs/prompts/agent-system-enhancement-plan.md)
- **AIエージェントプロンプト作成ガイド**: [prompt_excellence_guide.md](/docs/prompts/prompt_excellence_guide.md)
- **エージェントプロンプトテンプレート集**: [templates/](/docs/prompts/templates/)
  - [要件定義エージェント](/docs/prompts/templates/requirements-creator-template.md)
  - [モックアップクリエイター](/docs/prompts/templates/mockup-creator-template.md)
  - [データモデルアーキテクト](/docs/prompts/templates/data-model-architect-template.md)
  - [APIデザイナー](/docs/prompts/templates/api-designer-template.md)
  - [スコーププランナー](/docs/prompts/templates/scope-planner-template.md)
  - [プロジェクト分析エージェント](/docs/prompts/templates/project-analysis-template.md)
  - [プロジェクト分析エージェント](/docs/prompts/templates/project-analyst-template.md)

### テンプレート・ガイドライン
- **要件定義テンプレート**: [ideal_requirements_template.md](/docs/prompts/ideal_requirements_template.md)
- **スコープ進捗文書テンプレート**: [improved_scope_progress_template.md](/docs/prompts/improved_scope_progress_template.md)
- **Markdownテンプレートガイド**: [markdown-template-guide.md](/docs/templates/markdown-template-guide.md)
- **サンプルドキュメント**: 
  - [サンプル現況文書](/docs/samples/sample-current-status.md)
  - [サンプルAPI仕様書](/docs/samples/sample-api-spec.md)

### アーキテクチャ関連
- **ドキュメント参照関係の設計**: [document-references.md](/docs/architecture/document-references.md)
- **ドキュメント参照マップ**: [reference-map.md](/docs/architecture/reference-map.md)
- **参照検証ガイドライン**: [reference-validation.md](/docs/architecture/reference-validation.md)
- **エージェント通信プロトコル**: [agent-communication-protocol.md](/docs/architecture/agent-communication-protocol.md)
- **ファイル命名規約**: [file-naming-metadata-standards.md](/docs/architecture/file-naming-metadata-standards.md)

## 4. 依存関係

- **前提となる機能**: 既存のAIエージェントシステム
- **影響を与える機能**: プロジェクト全体の開発プロセス、ドキュメント管理、AI支援開発
- **外部サービス依存**: Claude API

## 5. 変更フロー

```
[現状分析] → [理想的ドキュメント構造の設計] → [開発プロセスの順序策定] → [エージェント構成の最適化] → [テンプレート・ガイドライン作成] → [統合テスト] → [フィードバック反映] → [AIエージェントシステム強化]
```

## 6. タスクリスト

### A. ドキュメント構造設計フェーズ

- [x] **A-1**: 理想的なドキュメントディレクトリ構造の設計
  - 完了日: 2025-05-06
  - 成果物: 3階層に制限されたシンプルで論理的なドキュメント構造
  - 内容:
    ```
    project/
    ├── docs/
    │   ├── requirements.md
    │   ├── CURRENT_STATUS.md
    │   ├── architecture/
    │   ├── api/
    │   ├── deployment/
    │   └── testing/
    ├── shared/
    │   └── index.ts      # 型定義の単一の真実源
    ├── mockups/
    │   ├── index.html
    │   ├── components/
    │   └── pages/
    └── .env.example
    ```

- [x] **A-2**: ドキュメント作成・更新順序の策定
  - 完了日: 2025-05-06
  - 成果物: 5段階に分けた理想的な文書作成・更新フロー
  - 内容:
    - 初期計画フェーズ (requirements.md, tech-stack.md等)
    - モックアップ開発フェーズ (components/, pages/等)
    - 技術設計フェーズ (data-model.md, api/等)
    - 実装準備フェーズ (CURRENT_STATUS.md, deploy.md等)
    - 実装・改善サイクル (継続的更新プロセス)

- [x] **A-3**: ドキュメント間の参照関係の設計
  - 完了日: 2025-05-06
  - 成果物: 包括的な参照システムと検証ルール

### B. エージェント構成最適化フェーズ

- [x] **B-1**: 理想的なAIエージェント構成の設計
  - 完了日: 2025-05-06
  - 成果物: 18種のAIエージェント定義と責任範囲
  - 内容:
    - コア設計エージェント(5種)
    - 基盤構築エージェント(2種)
    - 実装エージェント(3種)
    - 品質管理エージェント(2種)
    - デプロイと管理エージェント(2種)
    - 特殊目的エージェント(4種)
    - 各エージェントの担当・成果物・参照情報の明確化

- [x] **B-2**: エージェント間の情報フロー設計
  - 完了日: 2025-05-06
  - 成果物: エージェント通信プロトコル
  - 内容:
    - 設計フェーズのエージェント連携プロトコルの定義
    - 実装フェーズのエージェント連携プロトコルの定義
    - デプロイ・メンテナンスフェーズの連携プロトコルの定義
    - 標準化されたエージェント間引き継ぎフォーマットの策定
    - 効率的な情報伝達パターンの確立

- [x] **B-3**: エージェントプロンプトテンプレートの作成
  - 完了日: 2025-05-06
  - 成果物: エージェントプロンプトテンプレート集
  - 内容:
    - 主要エージェントタイプ別のテンプレート作成
    - エージェント役割と責務の明確化
    - コンテキスト効率化のためのガイドライン統合
    - 標準化された引き継ぎフォーマットの定義

### C. テンプレート・ガイドライン作成フェーズ

- [x] **C-1**: 要件定義書テンプレートの改善
  - 完了日: 2025-05-14
  - 成果物: 要件定義テンプレート
  - 内容:
    - セクション構成の最適化
    - 必須項目の定義
    - 視覚的表現ガイドライン

- [x] **C-2**: CURRENT_STATUS.mdテンプレートの改善
  - 完了日: 2025-05-14
  - 成果物: 改善版現況文書テンプレート
  - 内容:
    - タスク管理構造の最適化
    - 進捗追跡方法の改善
    - 参照情報の構造化
    - エラー引き継ぎログセクションの追加
    - リスク管理セクションの導入

- [x] **C-3**: ファイル命名規約とメタデータ標準の作成
  - 完了日: 2025-05-15
  - 成果物: ファイル命名規約
  - 内容:
    - ファイル命名規則
    - 標準ヘッダー・フッターの定義
    - メタデータ記述方法
    - AIエージェント間の文書引き継ぎ標準
    - ファイルタイプ別命名パターン

### D. ドキュメント実装・検証フェーズ

- [x] **D-1**: ドキュメントテンプレート実装
  - 完了日: 2025-05-16
  - 成果物: 
    - Markdownテンプレートガイド
    - サンプル現況文書
    - サンプルAPI仕様書
  - 内容:
    - Markdown標準テンプレートの作成
    - 視覚的デザイン要素の実装
    - サンプルドキュメントの作成

- [x] **D-2**: AIエージェントプロンプト作成ガイド
  - 完了日: 2025-05-18
  - 成果物: 
    - AIエージェントプロンプト作成の卓越ガイド
    - 要件定義エージェント「レコンX」の完全プロンプト
  - 内容:
    - 高品質プロンプト作成の原則
    - 18エージェント向け特化ガイドライン
    - プロンプト改善のための段階的アプローチ
    - 具体的なテンプレート構造

### E. 統合・最終化フェーズ

- [ ] **E-1**: 1. プロジェクトファウンデーションのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - 要件定義と技術選定の役割明確化
    - 成果物フォーマットの標準化
    - 他エージェントとの連携ポイント強化

- [ ] **E-2**: 2. モックアップクリエイターのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - UI/UX設計ガイドライン整合性確認
    - データモデルアーキテクトとの連携改善

- [ ] **E-3**: 3. データモデルアーキテクトのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - 型定義スタイル標準化
    - APIデザイナーとの情報連携強化

- [ ] **E-4**: 4. APIデザイナーのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - エンドポイント命名規則の標準化
    - 型定義参照スタイルの統一

- [ ] **E-5**: 5. 要件定義統合エージェントのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - 情報統合メカニズム改善
    - 実装優先順位決定基準明確化

- [ ] **E-6**: 6. 環境変数収集エージェントのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - セキュリティ対策強化
    - 環境別設定管理の標準化

- [ ] **E-7**: 7. 認証システムエージェントのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - JWT実装パターン標準化
    - 権限管理アプローチ一貫性確保

- [ ] **E-8**: 8. スコーププランナーのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - タスク分解精度向上
    - SCOPE_PROGRESS.md形式標準化

- [ ] **E-9**: 9. フロントエンド実装エージェントのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - コーディングスタイル一貫性確保
    - API連携パターン最適化

- [ ] **E-10**: 10. バックエンド実装エージェントのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - データアクセスパターン標準化
    - ビジネスロジック分離原則明確化

- [ ] **E-11**: 11. テスト管理エージェントのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - テスト戦略立案アプローチ改善
    - 実装エージェントとの連携強化

- [ ] **E-12**: 12. デバッグ探偵のプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - 問題分析フレームワーク標準化
    - 根本原因特定手法強化

- [ ] **E-13**: 13. デプロイ設定エージェントのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - CI/CDパイプライン構成最適化
    - 環境差異対応メカニズム改善

- [ ] **E-14**: 14. GitHub管理エージェントのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - ブランチ戦略標準化
    - セキュリティ対策強化

- [ ] **E-15**: 15. プロジェクト分析エージェントのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - コード分析アプローチ体系化
    - 分析レポート形式標準化

- [ ] **E-16**: 16. リファクタリングスペシャリストのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - 技術的負債特定手法改善
    - コード最適化パターンのライブラリ化

- [ ] **E-17**: 17. 段階的コード分割リファクタリングアドバイザーのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - 大規模ファイル分析手法改善
    - 並行動作保証メカニズム最適化

- [ ] **E-18**: 18. チェンジディレクターのプロンプト整合性検証
  - 目標: 2025-05-19
  - 内容:
    - 変更影響分析フレームワーク改善
    - AIエージェント間調整メカニズム強化

## 7. 実装上の注意点

### ドキュメント構造関連
- ドキュメントは「最大3階層」の制限を厳守し、ナビゲーションを容易にすること
- 各エージェントが必要な情報に効率的にアクセスできる構造を維持すること
- 非技術者にも理解しやすい視覚的要素や説明を取り入れること
- モックアップ中心アプローチを全プロセスにおいて徹底すること
- ドキュメントの生成と保守の労力を最小化する設計にすること
- データモデルの型定義は`shared/index.ts`を「単一の真実源」として参照すること
- APIドキュメントでは型定義への直接参照を必ず含めること

### AIエージェント関連
- エージェント間の連携を最優先事項とし、情報の受け渡しが円滑に行われるよう設計すること
- コンテキストウィンドウの効率的な活用を常に意識し、冗長な情報を排除すること
- 各エージェントは独立して機能しつつも、全体として一貫性のある出力を生成できるよう設計すること
- エージェントの自己診断能力を強化し、エラー検出・修正を自律的に行えるようにすること
- 標準化と柔軟性のバランスを取り、特殊なケースにも対応できる拡張性を確保すること
- すべてのプロンプトは「単一の真実源」の原則に従い、整合性を維持すること
- プロンプト作成には「AIエージェントプロンプト作成の卓越ガイド」に従うこと

## 9. 次のステップと課題

### 次のステップ
1. 各エージェントプロンプトの整合性検証と改善
2. 要件定義エージェントの実プロジェクトでのテスト
3. 既存プロジェクトからの移行ガイド作成
4. 小規模プロジェクトでのテスト実施
5. フィードバック収集と最終調整
6. Phase 1: 標準プロンプトテンプレート強化の開始
7. 各エージェントの現状分析と強化ポイントの詳細化
8. 連携プロトコルの詳細設計

### 現在の課題
1. テンプレート間の整合性確保
2. プロジェクト規模によるドキュメント適応方法
3. 既存プロジェクトの移行コスト評価
4. エージェント間の情報伝達における情報損失の最小化
5. コンテキストウィンドウの制限内での効率的な情報処理
6. 異なるプロジェクト規模・種類への適応メカニズム


# ドキュメント参照関係マップ

## 1. 概要

このドキュメントはAppGeniusプロジェクトにおける主要ドキュメント間の参照関係を視覚的に示し、ドキュメント間のナビゲーションを容易にするためのガイドです。この参照マップを活用することで、AIエージェントと開発者は必要な情報に効率的にアクセスできます。

## 2. 中心ドキュメントと参照フロー

```
                                                 ┌─────────────────┐
                                            ┌───▶│  mockups/      │
                                            │    │  - index.html   │
                                            │    │  - pages/*.html │
                                            │    │  - components/* │
                                            │    └─────────────────┘
                                            │             ▲
                                            │             │
┌─────────────────┐                         │             │
│ requirements.md │◀────┐                   │             │
└────────┬────────┘     │                   │             │
         │              │                   │    ┌────────┴────────┐
         ▼              │                   └────┤                 │
┌─────────────────┐     │                        │ SCOPE_PROGRESS.md
│ architecture/   │     │                   ┌────┤                 │
│ - tech-stack.md │     │                   │    └────────┬────────┘
│ - dir-structure │     │                   │             │
│ - data-model.md │◀────┼───────────────────┘             │
└────────┬────────┘     │                                 │
         │              │                                 │
         ▼              │                                 │
┌─────────────────┐     │                                 │
│ api/            │     │                                 │
│ - index.md      │     │                                 │
│ - auth.md       │◀────┘                                 ▼
│ - users.md      │                              ┌─────────────────┐
│ - feature.md    │                              │ deployment/     │
└────────┬────────┘                              │ - deploy.md     │
         │                                       │ - env-template.md
         │                                       └─────────────────┘
         ▼                                           
┌─────────────────┐                                   
│ shared/index.ts │                                   
│ - データモデル型定義 │                                   
│ - API型定義      │                                   
└─────────────────┘                                   
```

## 3. ドキュメント依存関係表

| ドキュメント | 参照先 | 参照元 | 主な目的 |
|-------------|-------|--------|---------|
| requirements.md | mockups/, architecture/, api/ | SCOPE_PROGRESS.md, すべてのドキュメント | プロジェクト全体の要件定義 |
| SCOPE_PROGRESS.md | requirements.md, mockups/, architecture/, api/, deployment/ | 実装タスク | 現在のスコープと実装タスク管理 |
| mockups/*.html | requirements.md | requirements.md, SCOPE_PROGRESS.md, api/ | 視覚的なUI設計 |
| architecture/tech-stack.md | requirements.md | SCOPE_PROGRESS.md, deployment/ | 技術選定の理由と詳細 |
| architecture/data-model.md | requirements.md, mockups/ | api/, SCOPE_PROGRESS.md | データ構造の概要と関係性の説明 |
| shared/index.ts | architecture/data-model.md | api/*.md, 実装コード | データモデル型定義の単一の真実源 |
| api/*.md | requirements.md, shared/index.ts | SCOPE_PROGRESS.md, 実装コード | APIエンドポイント仕様 |
| deployment/deploy.md | architecture/tech-stack.md | SCOPE_PROGRESS.md | デプロイ手順と環境設定 |

## 4. ドキュメントタイプと参照パターン

### 4.1 計画ドキュメント
- **requirements.md** → すべてのドキュメント（要件の真実源）
- **architecture/tech-stack.md** → 実装・デプロイ関連ドキュメント（技術選定の真実源）
- **architecture/directory-structure.md** → 実装関連ドキュメント（構造の真実源）

### 4.2 設計ドキュメント
- **mockups/*.html** → requirements.md, data-model.md, api/*.md（UI設計の真実源）
- **architecture/data-model.md** → api/*.md, 実装コード（データ構造の真実源）
- **api/*.md** → 実装コード（API仕様の真実源）

### 4.3 実装ドキュメント
- **SCOPE_PROGRESS.md** → 上記すべて（現在のタスクの真実源）
- **shared/index.ts** → 型定義とデータモデル（型定義の真実源）
- **deployment/*.md** → 実装・設定コード（デプロイ情報の真実源）

## 5. ドキュメント内部構造と参照セクション

### 5.1 requirements.md 構造
```
# プロジェクト要件定義
├── 1. 概要
├── 2. 機能要件
│   ├── 2.1 機能カテゴリ
│   │   ├── 2.1.1 機能詳細
│   │   │   └── 関連ドキュメント（参照セクション）
├── 3. 非機能要件
└── 4. 実装ステータス（SCOPE_PROGRESS.mdへの参照）
```

### 5.2 SCOPE_PROGRESS.md（スコープ進捗文書）構造
```
# スコープ進捗状況
├── 1. 基本情報
├── 2. 実装概要
├── 3. 参照ドキュメント（重要な参照セクション）
├── 4. 依存関係
├── 5. データフロー
├── 6. タスクリスト
│   ├── バックエンド実装
│   ├── フロントエンド実装
│   └── テストとドキュメント
├── 7. 実装上の注意点
└── 8. 実装状況の更新履歴
```

### 5.3 api/*.md 構造
```
# API仕様書
├── メタデータ（参照セクション）
├── エンドポイント一覧
└── 各エンドポイント詳細
    ├── リクエスト形式 → shared/index.ts (型定義への参照)
    ├── レスポンス形式 → shared/index.ts (型定義への参照)
    ├── エラーレスポンス → shared/index.ts (ApiErrorResponse)
    └── 認証要件
```

### 5.4 shared/index.ts 構造
```
# 型定義ファイル
├── ファイルヘッダーコメント（目的と使用方法）
├── インポート
├── 基本型定義
├── 列挙型定義
├── APIレスポンス型定義
├── サービス結果型定義
├── 認証関連型定義
├── モデル型定義（ユーザー、リスティングなど）
└── 変更履歴コメント
```

## 6. エージェント別参照ガイド

各AIエージェントが最も頻繁に参照すべきドキュメントとセクションを示します。

### 6.1 プロジェクトファウンデーション
- **主要参照**: requirements.md（全体）
- **二次参照**: architecture/tech-stack.md, mockups/index.html
- **作成ドキュメント**: requirements.md, architecture/tech-stack.md, architecture/directory-structure.md

### 6.2 モックアップクリエイター
- **主要参照**: requirements.md#2-機能要件
- **二次参照**: architecture/tech-stack.md
- **作成ドキュメント**: mockups/*.html

### 6.3 データモデルアーキテクト
- **主要参照**: requirements.md, mockups/*.html
- **二次参照**: architecture/tech-stack.md
- **作成ドキュメント**: architecture/data-model.md, shared/index.ts

### 6.4 APIデザイナー
- **主要参照**: mockups/*.html, shared/index.ts
- **二次参照**: requirements.md, architecture/data-model.md
- **作成ドキュメント**: api/*.md

### 6.5 スコーププランナー
- **主要参照**: requirements.md, mockups/*.html, api/*.md
- **二次参照**: architecture/directory-structure.md, shared/index.ts
- **作成ドキュメント**: SCOPE_PROGRESS.md

### 6.6 フロントエンド実装エージェント
- **主要参照**: SCOPE_PROGRESS.md, mockups/*.html, api/*.md
- **二次参照**: shared/index.ts, architecture/tech-stack.md
- **作成ドキュメント**: 実装コード

### 6.7 バックエンド実装エージェント
- **主要参照**: SCOPE_PROGRESS.md, api/*.md, shared/index.ts
- **二次参照**: architecture/tech-stack.md, architecture/data-model.md
- **作成ドキュメント**: 実装コード

### 6.8 環境&デプロイエージェント
- **主要参照**: architecture/tech-stack.md
- **二次参照**: SCOPE_PROGRESS.md
- **作成ドキュメント**: deployment/deploy.md, deployment/env-template.md

## 7. 参照関係の更新と維持

このドキュメント参照マップは以下のタイミングで更新します：

1. 新しい主要ドキュメントタイプの追加時
2. ドキュメント間の参照パターンに変更があった時
3. ドキュメント構造に大きな変更があった時
4. 新しいエージェントが追加された時

参照マップの維持責任者は「ドキュメントアーキテクト」または「メタドキュメント管理者」とし、全体の一貫性を確保します。


# AppGenius複数AIエージェント開発方法論 2.0

## 概要

本ドキュメントでは、複数AIによる効率的な開発プロセスとシステムの全体像について解説します。このアプローチは、要件定義から実装、テスト、デプロイまでの一連の流れを体系化し、モックアップ主導の開発と複数AIの連携による高品質なソフトウェア開発を実現します。

## エージェント構成

AppGeniusでは、18の専門AIエージェントが連携して開発を進めます。各エージェントは特定の役割と責任を持ち、一貫した成果物を生成します。

### 1. コア設計エージェント群

#### 1. プロジェクトファウンデーション
- **役割**: 要件定義、技術選定、基本アーキテクチャの設計
- **成果物**: requirements.md, architecture/tech-stack.md, 初期 directory-structure.md
- **参照**: クライアント要望資料、業界標準、競合分析
- **特徴**: プロジェクトの基盤となる設計を担当、方向性を決定
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/cdc2b284c05ebaae2bc9eb1f3047aa39

#### 2. モックアップクリエイター
- **役割**: UI/UX設計、HTMLモックアップ作成
- **成果物**: mockups/ ディレクトリ内の全ファイル
- **参照**: requirements.md, tech-stack.md, UI/UXガイドライン
- **特徴**: ビジュアル面に集中、ユーザー体験を具体化
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/8cdfe9875a5ab58ea5cdef0ba52ed8eb

#### 3. データモデルアーキテクト
- **役割**: データ構造設計、エンティティ関係定義、型システム設計
- **成果物**: shared/index.ts
- **参照**: requirements.md, mockups/, tech-stack.md
- **特徴**: モックアップからデータ要件を抽出して型定義化、フロントエンド/バックエンド間の型共有を設計
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/f0f6805b80ae32f3846c35fe9df4eefe

#### 4. APIデザイナー
- **役割**: REST API設計、エンドポイント定義
- **成果物**: docs/api/ ディレクトリ内の全ファイル
- **参照**: shared/index.ts, mockups/, requirements.md
- **特徴**: フロントとバックエンドの接続ポイントを設計

#### 5. 要件定義統合エージェント
- **役割**: モックアップから抽出された要件の統合、実装計画への橋渡し
- **成果物**: 更新された requirements.md, 最終化された directory-structure.md, 実装優先順位計画
- **参照**: モックアップ一式, データモデル, API仕様, 初期要件定義
- **特徴**: モックアップ作成段階で発見された要件を統合し、実装フェーズの基盤を準備

### 2. 基盤構築エージェント群

#### 6. 環境変数収集エージェント
- **役割**: 本番環境接続用の環境変数収集と管理
- **成果物**: .env, docs/deployment/env-template.md
- **参照**: tech-stack.md, 既存APIキーと認証情報
- **特徴**: 実際の本番環境キーを安全に収集・管理
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/50eb4d1e924c9139ef685c2f39766589

#### 7. 認証システムエージェント
- **役割**: JWT認証システムの設計と実装
- **成果物**: 認証関連コードとドキュメント
- **参照**: tech-stack.md, API仕様書, データモデル
- **特徴**: セキュアで自社実装のJWTベース認証システム
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/44b995b91e9879080c4e0169e7a51c0e

### 3. 実装エージェント群

#### 8. スコーププランナー
- **役割**: タスク分解、依存関係分析、実装計画
- **成果物**: SCOPE_PROGRESS.md
- **参照**: requirements.md, mockups/, shared/index.ts, api/, tech-stack.md
- **特徴**: 開発ロードマップを作成、具体的なタスクに落とし込む
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/b168dcd63cc12e15c2e57bce02caf704

#### 9. フロントエンド実装エージェント
- **役割**: UI実装、状態管理、APIクライアント
- **成果物**: フロントエンドコード
- **参照**: mockups/, api/, shared/index.ts, SCOPE_PROGRESS.md, tech-stack.md
- **特徴**: モックアップを動作するコードに変換
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/868ba99fc6e40d643a02e0e02c5e980a

#### 10. バックエンド実装エージェント
- **役割**: API実装、データアクセス、ビジネスロジック
- **成果物**: バックエンドコード
- **参照**: shared/index.ts, api/, SCOPE_PROGRESS.md, tech-stack.md
- **特徴**: 型定義と仕様からサーバー側を実装

### 4. 品質管理エージェント群

#### 11. テスト管理エージェント
- **役割**: テスト戦略、DB-TDD、品質保証
- **成果物**: testing/test-strategy.md, テストコード
- **参照**: requirements.md, api/, 実装コード
- **特徴**: データベース直接検証による効率的で信頼性の高いテスト
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/247df2890160a2fa8f6cc0f895413aed

#### 12. デバッグ探偵
- **役割**: フロントエンドエラーとAPI連携問題の分析・解決
- **成果物**: バグ修正、問題分析レポート
- **参照**: フロントエンドコード、API定義、ログ
- **特徴**: 根本原因分析と最小変更での問題解決
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/942ec5f5b316b3fb11e2fd2b597bfb09

### 5. デプロイと管理エージェント群

#### 13. デプロイ設定エージェント
- **役割**: Google Cloud Run環境へのデプロイ支援
- **成果物**: docs/deployment/deploy.md, デプロイスクリプト
- **参照**: tech-stack.md, 実装コード
- **特徴**: 環境差異の解消と安定したデプロイプロセスの確立
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/612fc1991ca477744c4544255d40fe0b

#### 14. GitHub管理エージェント
- **役割**: コード管理、安全なアップロード
- **成果物**: .gitignore, ブランチ戦略, コミット管理
- **参照**: プロジェクトファイル, .env
- **特徴**: 作業保全とセンシティブ情報の保護を最優先
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/e6167ac13d15f778c0cae369b0068813

### 6. 特殊目的エージェント群

#### 15. プロジェクト分析エージェント
- **役割**: 既存コード分析、リバースエンジニアリング
- **成果物**: 既存プロジェクト分析ドキュメント
- **参照**: 既存コードベース全体, 依存関係ファイル
- **特徴**: 途中参加時に既存システムを解析、現状把握を支援

#### 16. リファクタリングスペシャリスト
- **役割**: コード最適化、技術的負債対策
- **成果物**: リファクタリング計画と実装
- **参照**: 既存コード, パフォーマンス指標, コードレビュー
- **特徴**: 既存コードの品質向上、保守性の改善
- **URL**: http://appgenius-portal-test-235426778039.asia-northeast1.run.app/api/prompts/public/af9d922c29beffe1224ac6236d083946

#### 17. 段階的コード分割リファクタリングアドバイザー
- **役割**: 大規模コードファイルの安全な分割
- **成果物**: 詳細なリファクタリングタスクリスト、実装計画
- **参照**: リファクタリング対象コード
- **特徴**: 「骨を残して肉を入れ替える」アプローチによる安全なコード分割

#### 18. チェンジディレクター
- **役割**: 追加要件の分析、変更管理、AIエージェント間の調整
- **成果物**: 変更影響分析、更新プラン
- **参照**: requirements.md, SCOPE_PROGRESS.md, 全ドキュメント, 変更要求
- **特徴**: 既存プロジェクトへの機能追加やスコープ変更を管理

## ドキュメント構造

AppGeniusプロジェクトでは、以下のような構造でドキュメントを管理します：

```
project/
├── docs/                           # ドキュメントのルートディレクトリ
│   ├── requirements.md             # プロジェクト全体の要件定義書
│   ├── SCOPE_PROGRESS.md           # スコープ進捗状況とタスクリスト（中心的文書）
│   ├── architecture/               # アーキテクチャ関連ドキュメント
│   │   ├── directory-structure.md  # 理想的ディレクトリ構造の定義
│   │   └── tech-stack.md           # 技術スタックと選定理由
│   │
│   ├── api/                        # API仕様書
│   │   ├── index.md                # API概要と共通規則
│   │   ├── auth.md                 # 認証関連API
│   │   ├── users.md                # ユーザー管理API
│   │   └── [機能カテゴリ].md        # 機能別APIドキュメント
│   │
│   ├── deployment/                 # デプロイ関連
│   │   ├── env-template.md         # 環境変数テンプレート（実際の値は除外）
│   │   └── deploy.md               # デプロイ手順と環境設定
│   │
│   └── testing/                    # テスト関連（必要に応じて）
│       └── test-strategy.md        # テスト戦略とアプローチ
│
├── mockups/                        # モックアップのルートディレクトリ
│   ├── index.html                  # モックアップ一覧・ナビゲーション
│   ├── components/                 # 共通コンポーネント
│   │   └── [component-name].html   # 再利用可能なコンポーネント
│   │
│   └── pages/                      # ページ別モックアップ
│       ├── [page-name].html        # 各ページのモックアップ
│       └── assets/                 # モックアップで使用する画像等
│
├── shared/                         # 共有ファイルディレクトリ
│   └── index.ts                    # 型定義の単一の真実源
│
└── .env.example                    # 環境変数の例（実際の値は除外）
```

### ドキュメント構造の特徴

1. **シンプルな階層構造**:
   - 最大3階層に制限し、ナビゲーションを容易に
   - 関連文書を論理的にグループ化

2. **中心文書の明確化**:
   - requirements.mdとSCOPE_PROGRESS.mdをトップレベルに配置
   - 最も頻繁に参照される文書へのアクセスを簡単に

3. **機能別の文書分割**:
   - APIドキュメントを機能カテゴリ別に分割
   - 大きすぎる単一文書を避け、特定情報へのアクセスを容易に

4. **モックアップの独立管理**:
   - mockups/ディレクトリを別途設け、視覚的資料を整理
   - ページとコンポーネントの明確な分離

5. **実装との連携**:
   - 実際のソースコードディレクトリ構造と対応するドキュメント構造
   - shared/index.tsを通じたドキュメントとコード間の一貫性確保
   - 型定義を通じたフロントエンド/バックエンド間の整合性担保

## 開発プロセス

### 開発フロー

AppGeniusでは、以下のフローで開発を進めます：

#### 1. 初期計画フェーズ

1. **requirements.md**
   - プロジェクトの基本要件とゴールを定義
   - ページ一覧と主要機能の概要を作成
   - ユーザーストーリーと優先順位の設定

2. **architecture/tech-stack.md**
   - プロジェクトの技術選定と根拠を文書化
   - フロントエンド/バックエンド技術の決定
   - 開発環境と依存関係の定義

3. **architecture/directory-structure.md** (初期版)
   - 基本的なプロジェクト構造を設計
   - 命名規則とファイル配置ルールの確立
   - 拡張性を考慮した構造設計

4. **.env.example** (初期版)
   - 必要な環境変数の種類を定義
   - 各変数の目的と形式を説明
   - 秘匿情報の管理方針を確立

#### 2. モックアップ開発フェーズ

5. **mockups/components/** (基本コンポーネント)
   - 共通UI要素の設計と実装
   - デザインシステムの基礎確立
   - 再利用パターンの定義

6. **mockups/pages/** (優先度順)
   - コア機能から順にページモックアップを作成
   - ユーザーフローを実現する画面遷移の実装
   - インタラクションとフォーム要素の動作確認

7. **mockups/index.html**
   - 全モックアップへのナビゲーション実装
   - モックアップの全体像を可視化
   - 進捗状況の確認ポイント提供

#### 3. 技術設計フェーズ

8. **shared/index.ts**
   - モックアップから必要なデータ構造を抽出して型定義化
   - エンティティ間の関係を型システムで定義
   - フロントエンド/バックエンドで共有する型の設計

9. **directory-structure.md** (更新版)
   - モックアップから明らかになった実際のコンポーネント構造を反映
   - バックエンドの役割と責任に基づく構造の最適化
   - コード生成と保守を考慮したフォルダ構成の微調整

10. **api/index.md**
   - API設計の基本原則を定義
   - エンドポイント命名規則の確立
   - 認証とエラーハンドリングの共通方針

11. **api/[機能カテゴリ].md** (優先度順)
    - モックアップの機能を実現するAPI設計
    - リクエスト/レスポンス形式の定義
    - エラーケースの考慮

12. **api/auth.md**
    - 認証フローの詳細設計
    - トークン管理とセキュリティ対策
    - 権限管理の仕組み

13. **testing/test-strategy.md**
    - テストアプローチと範囲の定義
    - ユニット/統合/E2Eテストの方針
    - テスト環境と自動化の計画

#### 4. 実装準備フェーズ

14. **SCOPE_PROGRESS.md** (初期版)
    - 第一実装スコープの詳細定義
    - 具体的なタスクリストの作成
    - 依存関係と優先順位の設定
    - 要件定義統合エージェントの分析に基づく実装計画

15. **deployment/deploy.md**
    - 開発環境から本番環境への移行手順
    - CI/CDパイプラインの設定方法
    - リリース手順とチェックリスト

16. **deployment/env-template.md** (詳細版)
    - 実装に必要な全環境変数の完全リスト
    - 各環境(開発/ステージング/本番)の設定差分
    - シークレット管理の詳細手順

#### 5. 実装・改善サイクル

17. **SCOPE_PROGRESS.md** (継続的更新)
    - 実装進捗に合わせた定期的な更新
    - 次のスコープの詳細計画追加
    - 完了タスクの記録と振り返り

18. **architecture/directory-structure.md** (最終版)
    - 実際の実装経験を反映した調整
    - コード分割や最適化の反映
    - 将来の拡張性考慮点の追加

19. **requirements.md** (最終更新)
    - 実装過程で明らかになった要件の調整
    - 実現した機能と制約の明確化
    - プロジェクト全体の完成状況確認

### エージェント間のファイル参照フロー

- **初期設計フロー**:  
  クライアント要望 → プロジェクトファウンデーション → モックアップクリエイター → データモデルアーキテクト → APIデザイナー → 要件定義統合エージェント

- **実装フロー**:  
  要件定義統合エージェント → スコーププランナー → フロントエンド/バックエンド実装エージェント → テスト&品質エージェント

- **デプロイフロー**:  
  実装コード + 技術スタック情報 → 環境&デプロイエージェント → 本番環境

- **メンテナンスフロー**:  
  変更要求 → チェンジディレクター → 関連エージェント → リファクタリングスペシャリスト

## 特殊ケース対応

### 既存プロジェクト分析

既存プロジェクトに途中から参加する場合、プロジェクト分析エージェントを使用して以下のステップで分析を行います：

#### ステップ1: 基本構造の把握
- プロジェクトのディレクトリ構造の分析
- 主要ファイルとエントリーポイントの特定
- 依存関係の把握（package.jsonなど）

#### ステップ2: 技術スタックの特定
- 使用されているフレームワークとライブラリの確認
- ビルドツールと開発環境の理解
- アーキテクチャパターンの特定

#### ステップ3: 型定義の分析
- shared/index.tsのような型定義ファイルを重点的に調査
- データモデルとAPI型の構造を理解
- フロントエンドとバックエンド間の型共有パターンを把握

#### ステップ4: コンポーネント構造の分析
- 主要UIコンポーネントの特定
- ビジネスロジックの分離パターンの理解
- 状態管理アプローチの把握

#### ステップ5: APIとデータフローの分析
- エンドポイント設計とRESTfulパターンの理解
- データの流れと加工ポイントの特定
- 認証メカニズムの分析

#### ステップ6: レポート生成
- 既存ドキュメントの再構成
- 不足しているドキュメントの特定と作成
- 分析結果のSCOPE_PROGRESSへの統合

### 追加要件と変更管理

追加要件が発生した場合、チェンジディレクターが変更の種類と影響範囲を分析し、適切なプロセスを選択します：

1. **小規模な変更**（既存機能の微調整、単一エンドポイントの追加など）:
   - CURRENT_STATUS.mdとimplementation_order.md更新
   - スコーププランナーへの引き継ぎ

2. **中規模の変更**（既存機能の拡張、複数画面の変更など）:
   - 簡易版の要件定義追加
   - モックアップクリエイターへの引き継ぎ

3. **大規模な変更**（新しい機能領域、コアシステムへの影響大）:
   - 要件定義書の更新
   - 初めからの開発サイクル適用
   
4. **機能削除/廃止**:
   - リファクタリングスペシャリストによる影響分析
   - 段階的な削除計画作成

### コード最適化とリファクタリング

リファクタリングが必要な場合、以下のアプローチを取ります：

1. **全体的なアーキテクチャ改善**:
   - リファクタリングスペシャリストが技術的負債を分析
   - 改善計画の作成と優先順位付け
   - スコープ分けと段階的な実装
   
2. **大規模ファイルの分割**:
   - 段階的コード分割リファクタリングアドバイザーによる詳細分析
   - 関数一覧と依存関係マップの作成
   - フェーズ分けされた実装タスクリストの作成
   - 並行動作による安全性確保

## 型定義の参照パターン

型定義を「単一の真実源」として効果的に活用するためのベストプラクティス：

1. **API仕様書での型定義参照**
```markdown
## POST /api/users
**リクエスト型**: [CreateUserRequest](/shared/index.ts#L120-L135)
**レスポンス型**: [ApiResponse<User>](/shared/index.ts#L220-L225)

このエンドポイントは新規ユーザーを作成します。パスワードは自動的にハッシュ化されます。
```

2. **データモデル文書での型定義参照**
```markdown
### ユーザーエンティティ

ユーザーモデルは認証と権限管理の基盤となる重要なエンティティです。
**モデル定義**: [User型](/shared/index.ts#L50-L70)
**関連モデル**: 
- [UserRole型](/shared/index.ts#L30-L35) - ユーザーの役割と権限レベル
- [UserPreferences型](/shared/index.ts#L80-L95) - ユーザー設定情報
```

3. **実装タスクでの型定義参照**
```markdown
### FE-2: ユーザー管理画面の実装
- 目標: 2025-05-10
- 依存: BE-1
- 型定義: 
  - [UserListResponse](/shared/index.ts#L250-L260)
  - [UserSortOptions](/shared/index.ts#L180-L185)
```

4. **実装コード内の型定義参照コメント**
```typescript
/**
 * ユーザーサービス実装
 * @see /shared/index.ts#L50-L70 - User型定義
 */
class UserService {
  // 実装
}
```

5. **モックアップからデータモデルへの参照**
```html
<!-- ユーザープロフィールカード -->
<!-- データモデル: /shared/index.ts#L50-L70 (User型) -->
<div class="user-card">
  <h3 class="user-name">{{user.displayName}}</h3>
  <p class="user-role">{{user.role}}</p>
</div>
```

## 開発原則

1. **モックアップ主導開発**
   - モックアップをまず作成し、それを「動かす」ことに集中
   - 非技術者にも理解しやすい進捗状況の可視化

2. **単一の真実源**
   - 型定義はshared/index.tsに一元管理
   - APIパスもshared/index.tsで定義

3. **中央資料の一貫性維持**
   - すべての変更は中央資料に反映
   - 複数AIが同じ情報源を参照できるよう整合性を保持

4. **シンプルさと品質重視の姿勢**
   - 「とりあえず動く」ではなく、正しく簡潔な実装を追求
   - 本質的に必要なものだけを残し、複雑性を排除
   - 問題の根本原因を特定し、正面から解決

5. **実証的アプローチ**
   - モックデータではなく実際の環境変数を使用
   - テスト環境でも本番環境と同じ認証情報を使用

6. **シンプルな自社実装認証**
   - JWTベースの独自認証システム実装
   - データフローのシンプル化とエラー特定の容易さを実現
   - アクセストークンとリフレッシュトークンの2段階方式

7. **機能のライフサイクル管理**
   - 機能の提案から実装、保守、廃止までを体系的に管理
   - 変更・追加・削除の影響範囲を常に評価
   - リファクタリングを継続的改善サイクルに組み込む

## まとめ

AppGeniusの複数AIエージェント開発方法論は、要件定義からモックアップ作成、データモデル設計、実装、テスト、デプロイまでの一連のプロセスを体系化し、18の専門AIエージェントの連携によって高品質なソフトウェア開発を実現します。

この方法論の特徴は、役割が明確に分担されたAIエージェント、シンプルで整理されたドキュメント構造、型定義の一元管理、モックアップ主導の開発プロセス、そしてSCOPE_PROGRESSによる進捗管理です。

各AIエージェントがその専門分野に集中し、一貫したドキュメントと成果物を生成することで、シンプルで堅牢、かつ保守性の高い開発を実現します。また、既存プロジェクト分析や変更管理、リファクタリングなどの特殊ケースにも対応するエージェントを用意し、プロジェクトのライフサイクル全体をサポートします。