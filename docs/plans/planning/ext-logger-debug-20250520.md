# 機能拡張計画: デバッグログの改善 [2025-05-20]

## 1. 拡張概要

開発環境でのデバッグを容易にするため、ログ出力の可視性と詳細度を向上させます。特にプロジェクト新規作成や読み込み時の動作確認を容易にするため、ログ表示の自動化と不要なフィルタリングの削除を行います。

## 2. 詳細仕様

### 2.1 現状と課題

現在、以下の問題があります：
1. 開発環境でもログウィンドウが自動的に表示されないことがある
2. 一部のログメッセージが過度にフィルタリングされている
3. 開発環境と本番環境で明確なログレベル分離が行われていない場合がある

これにより、開発中にデバッグ情報が見えず、問題解決が困難になっています。

### 2.2 拡張内容

1. ロガー初期化時に開発環境では常にログウィンドウを表示する設定を強化
2. 開発環境ではログメッセージのフィルタリングを無効化または緩和
3. VSCode内の「OUTPUT」パネルでデフォルトで選択されるチャンネルを「ブルーランプ」に設定
4. 重要な処理（プロジェクト作成、ファイル読み込みなど）の前後に明示的なログマーカーを追加

### 3 ディレクトリ構造

変更が必要なファイルの構造は以下の通りです：

```
src/
  utils/
    logger.ts (更新)
  extension.ts (更新)
```

## 4. 技術的影響分析

### 4.1 影響範囲

- **バックエンド**: ログ処理ロジック
- **その他**: 開発体験とデバッグ容易性の向上

### 4.2 変更が必要なファイル

```
- src/utils/logger.ts: デバッグ環境でのフィルタリング緩和と表示強化
- src/extension.ts: ロガー初期化パラメータの調整
```

## 5. タスクリスト

```
- [ ] **T1**: logger.ts の info メソッドを修正し、開発環境ではフィルタリングを行わないように変更
- [ ] **T2**: extension.ts のロガー初期化を更新し、より明確に開発環境と本番環境を区別
- [ ] **T3**: プロジェクト作成、読み込み処理の前後に明示的なログマーカーを追加
- [ ] **T4**: 実装をテストし、ログ出力が適切に表示されるか確認
```

### 6 テスト計画

1. 開発環境でのログ表示テスト
   - VSCode拡張をデバッグモードで起動し、ログが自動的に表示されるか確認
   - プロジェクト作成、読み込み時に詳細なログが表示されるか確認

2. 本番環境でのログ表示テスト
   - 本番環境設定でビルドした拡張機能で、警告とエラーのみが表示されるか確認

## 7. SCOPE_PROGRESSへの統合

[SCOPE_PROGRESS.md]に単体タスクとして統合します。

```markdown
- [ ] **T-DEBUG-1**: デバッグログの改善
  - 目標: 2025-05-21
  - 参照: [/docs/plans/planning/ext-logger-debug-20250520.md](/docs/plans/planning/ext-logger-debug-20250520.md)
  - 内容: 開発環境でのデバッグを容易にするため、ログ出力の可視性と詳細度を向上
```

## 8. 備考

この変更は開発体験を向上させるためのものであり、実際の機能や動作には影響しません。ただし、詳細なログが表示されることで開発中のデバッグが容易になり、問題解決が迅速化されます。