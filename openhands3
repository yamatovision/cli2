#!/bin/bash
# OpenHands3 launcher script - SessionSwitchAgent (â˜…13-â˜…15)

# Get the directory where this script is actually located (resolve symlinks)
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ]; do # resolve $SOURCE until the file is no longer a symlink
  SCRIPT_DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"
  SOURCE="$(readlink "$SOURCE")"
  [[ $SOURCE != /* ]] && SOURCE="$SCRIPT_DIR/$SOURCE" # if $SOURCE was a relative symlink, we need to resolve it relative to the path where the symlink file was located
done
SCRIPT_DIR="$( cd -P "$( dirname "$SOURCE" )" >/dev/null 2>&1 && pwd )"

# Change to the script directory
cd "$SCRIPT_DIR"

echo "ðŸ”„ Starting OpenHands3 with SessionSwitchAgent (â˜…13-â˜…15)..."
echo "Available modes:"
echo "  â˜…13: GitHub Manager - Repository and version control"
echo "  â˜…14: TypeScript Manager - TypeScript development"
echo "  â˜…15: Feature Extension Planner - Feature planning"
echo ""
echo "Use /switch [13|14|15] to change modes during the session."
echo ""

# Run openhands3 using poetry with Python 3.12
poetry env use python3.12
exec poetry run python -m openhands.cli.main_session "$@"